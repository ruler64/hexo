{
    "version": "https://jsonfeed.org/version/1",
    "title": "Rulerã®åšå®¢",
    "subtitle": "ä¸å¤©å¯¹å¼ˆï¼Œåˆå¿ƒä¸æ”¹",
    "icon": "https://ruler64.github.io/hexo/images/favicon.ico",
    "description": "è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢",
    "home_page_url": "https://ruler64.github.io/hexo",
    "items": [
        {
            "id": "https://ruler64.github.io/hexo/Redis%E7%9A%84Java%E5%AE%A2%E6%88%B7%E7%AB%AF/",
            "url": "https://ruler64.github.io/hexo/Redis%E7%9A%84Java%E5%AE%A2%E6%88%B7%E7%AB%AF/",
            "title": "Redisçš„Javaå®¢æˆ·ç«¯",
            "date_published": "2024-07-05T09:32:44.000Z",
            "content_html": "<div class=\"note info\">\n<p>Spring Data Redis é›†æˆäº† Jedis ä¸ lettuceï¼Œä½†æœ‰äº›ä¼ä¸šä»åœ¨ä½¿ç”¨ Jedis è€Œæ²¡æœ‰ç”¨ Spring Data Redis</p>\n<ul>\n<li>Jedisï¼šä»¥ Redis å‘½ä»¤ä½œä¸ºæ–¹æ³•åç§°ï¼Œå­¦ä¹ æˆæœ¬ä½ï¼Œç®€å•å®ç”¨ã€‚ä½†æ˜¯ Jedis å®ä¾‹æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€è¦åŸºäºè¿æ¥æ± æ¥ä½¿ç”¨</li>\n<li>Lettuceï¼šLettuce æ˜¯åŸºäº Netty å®ç°çš„ï¼Œæ”¯æŒåŒæ­¥ã€å¼‚æ­¥å’Œå“åº”å¼ç¼–ç¨‹æ–¹å¼ï¼Œå¹¶ä¸”æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚æ”¯æŒ Redis çš„å“¨å…µæ¨¡å¼ã€é›†ç¾¤æ¨¡å¼å’Œç®¡é“æ¨¡å¼ã€‚</li>\n</ul>\n</div>\n<h1 id=\"jedis\"><a class=\"anchor\" href=\"#jedis\">#</a> Jedis</h1>\n<p><span class=\"red\">Jedis ä½¿ç”¨çš„åŸºæœ¬æ­¥éª¤ï¼š</span></p>\n<ol>\n<li>å¼•å…¥ä¾èµ–</li>\n<li>åˆ›å»º Jedis å¯¹è±¡ï¼Œå»ºç«‹è¿æ¥</li>\n<li>ä½¿ç”¨ Jedisï¼Œæ–¹æ³•åä¸ Redis å‘½ä»¤ä¸€è‡´</li>\n<li>é‡Šæ”¾èµ„æº</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//1. å¼•å…¥ä¾èµ–</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>dependency<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>groupId<span class=\"token punctuation\">></span></span>redis<span class=\"token punctuation\">.</span>clients<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>groupId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>artifactId<span class=\"token punctuation\">></span></span>jedis<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>artifactId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>version<span class=\"token punctuation\">></span></span><span class=\"token number\">3.7</span><span class=\"token number\">.0</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>version<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>dependency<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">//2. å»ºç«‹è¿æ¥</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">Jedis</span> jedis<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token annotation punctuation\">@BeforeEach</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// å»ºç«‹è¿æ¥</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    jedis <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Jedis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"192.168.150.101\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6379</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// è®¾ç½®å¯†ç </span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    jedis<span class=\"token punctuation\">.</span><span class=\"token function\">auth</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"123321\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">// é€‰æ‹©åº“</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    jedis<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">//3. æµ‹è¯• string</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">testString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token comment\">// æ’å…¥æ•°æ®ï¼Œæ–¹æ³•åç§°å°±æ˜¯ redis å‘½ä»¤åç§°ï¼Œéå¸¸ç®€å•</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token class-name\">String</span> result <span class=\"token operator\">=</span> jedis<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"å¼ ä¸‰\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"result = \"</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token comment\">// è·å–æ•°æ®</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> jedis<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name = \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token comment\">//4. é‡Šæ”¾èµ„æº</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token annotation punctuation\">@AfterEach</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">tearDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token comment\">// é‡Šæ”¾èµ„æº</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jedis <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        jedis<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"jedisè¿æ¥æ± \"><a class=\"anchor\" href=\"#jedisè¿æ¥æ± \">#</a> Jedis è¿æ¥æ± </h2>\n<div class=\"note info\">\n<p>Jedis æœ¬èº«æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯è¿æ¥ä¼šæœ‰æ€§èƒ½æŸè€—ï¼Œå› æ­¤æ¨èä½¿ç”¨ Jedis è¿æ¥æ± ä»£æ›¿ Jedis çš„ç›´è¿æ–¹å¼ã€‚</p>\n</div>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JedisConnectionFactory</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">JedisPool</span> jedisPool<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">static</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">JedisPoolConfig</span> jedisPoolConfig <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JedisPoolConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">// æœ€å¤§è¿æ¥</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        jedisPoolConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setMaxTotal</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// æœ€å¤§ç©ºé—²è¿æ¥</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        jedisPoolConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setMaxIdle</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// æœ€å°ç©ºé—²è¿æ¥</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        jedisPoolConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setMinIdle</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// è®¾ç½®æœ€é•¿ç­‰å¾…æ—¶é—´ï¼Œ ms</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        jedisPoolConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setMaxWaitMillis</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        jedisPool <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JedisPool</span><span class=\"token punctuation\">(</span>jedisPoolConfig<span class=\"token punctuation\">,</span><span class=\"token string\">\"192.168.31.128\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6379</span><span class=\"token punctuation\">,</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"123321\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">// è·å– Jedis å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Jedis</span> <span class=\"token function\">getJedis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">return</span> jedisPool<span class=\"token punctuation\">.</span><span class=\"token function\">getResource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"springdataredis\"><a class=\"anchor\" href=\"#springdataredis\">#</a> SpringDataRedis</h1>\n<div class=\"note info\">\n<p><strong>SpringData</strong> æ˜¯<strong> Spring</strong> ä¸­æ•°æ®æ“ä½œçš„æ¨¡å—ï¼ŒåŒ…å«å¯¹å„ç§æ•°æ®åº“çš„é›†æˆï¼Œå…¶ä¸­å¯¹<strong> Redis</strong> çš„é›†æˆæ¨¡å—å°±å«åš<strong> SpringDataRedis</strong>ï¼Œå®˜ç½‘åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcHJpbmcuaW8vcHJvamVjdHMvc3ByaW5nLWRhdGEtcmVkaXM=\">https://spring.io/projects/spring-data-redis</span></p>\n<p>å°æç¤ºğŸ’¡ï¼š</p>\n<p>RedisTemplate çš„ä¸¤ç§åºåˆ—åŒ–å®è·µæ–¹æ¡ˆï¼š</p>\n<p>æ–¹æ¡ˆä¸€ï¼š</p>\n<p>1. è‡ªå®šä¹‰ RedisTemplate</p>\n<p>2. ä¿®æ”¹ RedisTemplate çš„åºåˆ—åŒ–å™¨ä¸º GenericJackson2JsonRedisSerializer</p>\n<p>* æ–¹æ¡ˆäºŒï¼š</p>\n<p>1. ä½¿ç”¨ StringRedisTemplate</p>\n<p>2. å†™å…¥ Redis æ—¶ï¼Œæ‰‹åŠ¨æŠŠå¯¹è±¡åºåˆ—åŒ–ä¸º JSON</p>\n<p>è¯»å– Redis æ—¶ï¼Œæ‰‹åŠ¨æŠŠè¯»å–åˆ°çš„ JSON ååºåˆ—åŒ–ä¸ºå¯¹è±¡</p>\n</div>\n<ul>\n<li>æä¾›äº†å¯¹ä¸åŒ Redis å®¢æˆ·ç«¯çš„æ•´åˆï¼ˆLettuce å’Œ Jedisï¼‰</li>\n<li>æä¾›äº† RedisTemplate ç»Ÿä¸€ API æ¥æ“ä½œ Redis</li>\n<li>æ”¯æŒ Redis çš„å‘å¸ƒè®¢é˜…æ¨¡å‹</li>\n<li>æ”¯æŒ Redis å“¨å…µå’Œ Redis é›†ç¾¤</li>\n<li>æ”¯æŒåŸºäº Lettuce çš„å“åº”å¼ç¼–ç¨‹</li>\n<li>æ”¯æŒåŸºäº JDKã€JSONã€å­—ç¬¦ä¸²ã€Spring å¯¹è±¡çš„æ•°æ®åºåˆ—åŒ–åŠååºåˆ—åŒ–</li>\n<li>æ”¯æŒåŸºäº Redis çš„ JDKCollection å®ç°</li>\n</ul>\n<p><strong>SpringDataRedis</strong> ä¸­æä¾›äº†<strong> RedisTemplate</strong> å·¥å…·ç±»ï¼Œå…¶ä¸­å°è£…äº†å„ç§å¯¹ Redis çš„æ“ä½œã€‚å¹¶ä¸”å°†ä¸åŒæ•°æ®ç±»å‹çš„æ“ä½œ API å°è£…åˆ°äº†ä¸åŒçš„ç±»å‹ä¸­ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">API</th>\n<th style=\"text-align:center\">è¿”å›å€¼ç±»å‹</th>\n<th style=\"text-align:center\">è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><strong>redisTemplate</strong>.opsForValue()</td>\n<td style=\"text-align:center\">ValueOperations</td>\n<td style=\"text-align:center\">æ“ä½œ<strong> String</strong> ç±»å‹æ•°æ®</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><strong>redisTemplate</strong>.opsForHash()</td>\n<td style=\"text-align:center\">HashOperations</td>\n<td style=\"text-align:center\">æ“ä½œ<strong> Hash</strong> ç±»å‹æ•°æ®</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><strong>redisTemplate</strong>.opsForList()</td>\n<td style=\"text-align:center\">ListOperations</td>\n<td style=\"text-align:center\">æ“ä½œ<strong> List</strong> ç±»å‹æ•°æ®</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><strong>redisTemplate</strong>.opsForSet()</td>\n<td style=\"text-align:center\">SetOperations</td>\n<td style=\"text-align:center\">æ“ä½œ<strong> Set</strong> ç±»å‹æ•°æ®</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><strong>redisTemplate</strong>.opsForZSet()</td>\n<td style=\"text-align:center\">ZSetOperations</td>\n<td style=\"text-align:center\">æ“ä½œ<strong> SortedSet</strong> ç±»å‹æ•°æ®</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><strong>redisTemplate</strong></td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\">é€šç”¨çš„å‘½ä»¤</td>\n</tr>\n</tbody>\n</table>\n<p><span class=\"red\">SpringDataRedis çš„ä½¿ç”¨æ­¥éª¤ï¼š</span></p>\n<ol>\n<li>å¼•å…¥ spring-boot-starter-data-redis ä¾èµ–</li>\n<li>åœ¨ application.yml é…ç½® Redis ä¿¡æ¯</li>\n<li>æ³¨å…¥ RedisTemplate</li>\n</ol>\n<p>1. å¼•å…¥ä¾èµ–</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span><span class=\"token class-name\">Redis</span>ä¾èµ–<span class=\"token operator\">--</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>dependency<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>groupId<span class=\"token punctuation\">></span></span>org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>groupId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>artifactId<span class=\"token punctuation\">></span></span>spring<span class=\"token operator\">-</span>boot<span class=\"token operator\">-</span>starter<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>redis<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>artifactId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>dependency<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>è¿æ¥æ± ä¾èµ–<span class=\"token operator\">--</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>dependency<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>groupId<span class=\"token punctuation\">></span></span>org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>commons<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>groupId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>artifactId<span class=\"token punctuation\">></span></span>commons<span class=\"token operator\">-</span>pool2<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>artifactId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>dependency<span class=\"token operator\">></span></pre></td></tr></table></figure><p>2. é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token key atrule\">redis</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    \t<span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> 192.168.31.128 <span class=\"token comment\"># è™šæ‹Ÿæœºåœ°å€</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">6379</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> <span class=\"token number\">123321</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token key atrule\">lettuce</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token key atrule\">pool</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                <span class=\"token key atrule\">max-active</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8</span> <span class=\"token comment\"># æœ€å¤§è¿æ¥</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token key atrule\">max-idle</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8</span> <span class=\"token comment\"># æœ€å¤§ç©ºé—²è¿æ¥</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token key atrule\">min-idle</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token comment\"># æœ€å°ç©ºé—²è¿æ¥</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token key atrule\">max-wait</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span> <span class=\"token comment\"># è¿æ¥ç­‰å¾…æ—¶é—´</span></pre></td></tr></table></figure><p>3. æ³¨å…¥ RedisTemplate</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">RedisTemplate</span> redisTemplate<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>4. ç¼–å†™æµ‹è¯•</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@SpringBootTest</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">RedisTemplate</span> redisTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">testString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\">// æ’å…¥ä¸€æ¡ string ç±»å‹æ•°æ®</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"æå››\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token comment\">// è¯»å–ä¸€æ¡ string ç±»å‹æ•°æ®</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">Object</span> name <span class=\"token operator\">=</span> redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name = \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"springdataredisçš„åºåˆ—åŒ–æ–¹å¼\"><a class=\"anchor\" href=\"#springdataredisçš„åºåˆ—åŒ–æ–¹å¼\">#</a> SpringDataRedis çš„åºåˆ—åŒ–æ–¹å¼</h2>\n<p>RedisTemplate å¯ä»¥æ¥æ”¶ä»»æ„ Object ä½œä¸ºå€¼å†™å…¥ Redisï¼Œåªä¸è¿‡å†™å…¥å‰ä¼šæŠŠ Object åºåˆ—åŒ–ä¸ºå­—èŠ‚å½¢å¼ï¼Œé»˜è®¤æ˜¯é‡‡ç”¨ JDK åºåˆ—åŒ–ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯è¿™æ ·çš„ï¼š <code>\\AC\\XED</code></p>\n<p>ç¼ºç‚¹ï¼š</p>\n<ul>\n<li>å¯è¯»æ€§å·®</li>\n<li>å†…å­˜å ç”¨è¾ƒå¤§</li>\n</ul>\n<p><span class=\"red\">æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ RedisTemplate çš„åºåˆ—åŒ–æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</span></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">redisTemplate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisConnectionFactory</span> redisConnectionFactory<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">throws</span> <span class=\"token class-name\">UnknownHostException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// åˆ›å»º Template</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> redisTemplate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// è®¾ç½®è¿æ¥å·¥å‚</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setConnectionFactory</span><span class=\"token punctuation\">(</span>redisConnectionFactory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// è®¾ç½®åºåˆ—åŒ–å·¥å…·</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token class-name\">GenericJackson2JsonRedisSerializer</span> jsonRedisSerializer <span class=\"token operator\">=</span> </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\t\t\t\t<span class=\"token keyword\">new</span> <span class=\"token class-name\">GenericJackson2JsonRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">//key å’Œ hashKey é‡‡ç”¨ string åºåˆ—åŒ–</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setKeySerializer</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisSerializer</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setHashKeySerializer</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisSerializer</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">//value å’Œ hashValue é‡‡ç”¨ JSON åºåˆ—åŒ–</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setValueSerializer</span><span class=\"token punctuation\">(</span>jsonRedisSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setHashValueSerializer</span><span class=\"token punctuation\">(</span>jsonRedisSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">return</span> redisTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å°½ç®¡ JSON çš„åºåˆ—åŒ–æ–¹å¼å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†ä¾ç„¶å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå¦‚å›¾ï¼š</p>\n<p><img data-src=\"1.png\" alt=\"\" /></p>\n<p>ä¸ºäº†åœ¨ååºåˆ—åŒ–æ—¶çŸ¥é“å¯¹è±¡çš„ç±»å‹ï¼ŒJSON åºåˆ—åŒ–å™¨ä¼šå°†ç±»çš„ class ç±»å‹å†™å…¥ json ç»“æœä¸­ï¼Œå­˜å…¥ Redisï¼Œä¼šå¸¦æ¥é¢å¤–çš„å†…å­˜å¼€é”€ã€‚æ‰€ä»¥äº§ç”Ÿäº†ä½¿ç”¨<strong> StringRedisTemplate</strong> è¿™ç§è§£å†³åŠæ³•</p>\n<h2 id=\"stringredistemplate\"><a class=\"anchor\" href=\"#stringredistemplate\">#</a> *StringRedisTemplate</h2>\n<p>ä¸ºäº†èŠ‚çœå†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šä½¿ç”¨ JSON åºåˆ—åŒ–å™¨æ¥å¤„ç† valueï¼Œè€Œæ˜¯ç»Ÿä¸€ä½¿ç”¨ String åºåˆ—åŒ–å™¨ï¼Œè¦æ±‚åªèƒ½å­˜å‚¨ String ç±»å‹çš„ key å’Œ valueã€‚å½“éœ€è¦å­˜å‚¨ Java å¯¹è±¡æ—¶ï¼Œ<strong>æ‰‹åŠ¨å®Œæˆ</strong>å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p>\n<p><img data-src=\"2.png\" alt=\"\" /></p>\n<p>Spring é»˜è®¤æä¾›äº†ä¸€ä¸ª<strong> StringRedisTemplate</strong> ç±»ï¼Œå®ƒçš„ key å’Œ value çš„åºåˆ—åŒ–æ–¹å¼é»˜è®¤å°±æ˜¯ String æ–¹å¼ã€‚çœå»äº†æˆ‘ä»¬è‡ªå®šä¹‰ RedisTemplate çš„è¿‡ç¨‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">StringRedisTemplate</span> stringRedisTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// JSON å·¥å…·</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ObjectMapper</span> mapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">testStringTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">JsonProcessingException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// å‡†å¤‡å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"è™å“¥\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">// æ‰‹åŠ¨åºåˆ—åŒ–</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token class-name\">String</span> json <span class=\"token operator\">=</span> mapper<span class=\"token punctuation\">.</span><span class=\"token function\">writeValueAsString</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// å†™å…¥ä¸€æ¡æ•°æ®åˆ° redis</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user:200\"</span><span class=\"token punctuation\">,</span> json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// è¯»å–æ•°æ®</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token class-name\">String</span> val <span class=\"token operator\">=</span> stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user:200\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">// ååºåˆ—åŒ–</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token class-name\">User</span> user1 <span class=\"token operator\">=</span> mapper<span class=\"token punctuation\">.</span><span class=\"token function\">readValue</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">,</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user1 = \"</span> <span class=\"token operator\">+</span> user1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": [
                "ç¬”è®°",
                "åç«¯,Redisçš„Javaå®¢æˆ·ç«¯"
            ]
        },
        {
            "id": "https://ruler64.github.io/hexo/Redis%E5%91%BD%E4%BB%A4/",
            "url": "https://ruler64.github.io/hexo/Redis%E5%91%BD%E4%BB%A4/",
            "title": "Rediså‘½ä»¤",
            "date_published": "2024-07-03T00:32:44.000Z",
            "content_html": "<div class=\"note info\">\n<p>Redis çš„å‘½ä»¤ï¼Œå¯ä»¥åœ¨ redis-cli ä¸‹é€šè¿‡ <code>help [å‘½ä»¤åç§°]</code>  æ¥æŸ¥çœ‹ä¸€ä¸ªå‘½ä»¤çš„å…·ä½“ç”¨æ³•ã€‚</p>\n</div>\n<h1 id=\"redisçš„é€šç”¨å‘½ä»¤\"><a class=\"anchor\" href=\"#redisçš„é€šç”¨å‘½ä»¤\">#</a> Redis çš„é€šç”¨å‘½ä»¤</h1>\n<p>é€šç”¨å‘½ä»¤æ˜¯éƒ¨åˆ†æ•°æ®ç±»å‹çš„ï¼Œéƒ½å¯ä»¥ä½¿ç”¨çš„å‘½ä»¤ï¼Œå¸¸è§çš„æœ‰ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>KEYS: æŸ¥çœ‹ç¬¦åˆæ¨¡æ¿çš„æ‰€æœ‰keyï¼Œä¸å»ºè®®åœ¨ç”Ÿäº§è®¾å¤‡ä¸Šä½¿ç”¨</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>DEL: åˆ é™¤ä¸€ä¸ªæŒ‡å®šçš„key</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>EXISTS: åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>EXPIRE: ç»™ä¸€ä¸ªkeyè®¾ç½®æœ‰æ•ˆæœŸï¼Œåˆ°æœŸè‡ªåŠ¨åˆ é™¤è¯¥key</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>TTL: æŸ¥çœ‹ä¸€ä¸ªkeyçš„å‰©ä½™æœ‰æ•ˆæœŸ</pre></td></tr></table></figure><h1 id=\"rediså‘½ä»¤-stringç±»å‹\"><a class=\"anchor\" href=\"#rediså‘½ä»¤-stringç±»å‹\">#</a> Redis å‘½ä»¤ - String ç±»å‹</h1>\n<div class=\"note info\">\n<p>Sting ç±»å‹ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œåœ¨ Redis ä¸­å¯åˆ†ä¸º 3 ç±»ï¼š</p>\n<ul>\n<li>Stringï¼šæ™®é€šå­—ç¬¦ä¸²</li>\n<li>intï¼šæ•´æ•°ç±»å‹ï¼Œå¯ä»¥è‡ªå¢ / è‡ªå‡</li>\n<li>floatï¼šæµ®ç‚¹ç±»å‹ï¼Œå¯ä»¥è‡ªå¢ / è‡ªå‡</li>\n</ul>\n<p>ä¸ç®¡å“ªç§æ ¼å¼ï¼Œåº•å±‚éƒ½æ˜¯å­—èŠ‚æ•°ç»„å½¢å¼å­˜å‚¨ï¼Œä¸è¿‡æ˜¯ç¼–ç æ–¹å¼ä¸åŒï¼Œå­—ç¬¦ä¸²ç±»å‹çš„æœ€å¤§ç©ºé—´ä¸èƒ½è¶…è¿‡ 512M</p>\n</div>\n<p>String çš„å¸¸è§å‘½ä»¤æœ‰ï¼š</p>\n<ul>\n<li>SETï¼š<strong>æ·»åŠ </strong>æˆ–è€…<strong>ä¿®æ”¹</strong>å·²ç»å­˜åœ¨çš„ä¸€ä¸ª String ç±»å‹çš„é”®å€¼å¯¹ <code>SET name Jack</code></li>\n<li>GETï¼šæ ¹æ® key è·å– String ç±»å‹çš„ value <code>GET name</code></li>\n<li>MSETï¼šæ‰¹é‡æ·»åŠ å¤šä¸ª String ç±»å‹çš„é”®å€¼å¯¹ <code>MSET k1 v1 k2 v2</code></li>\n<li>MGETï¼šæ ¹æ®å¤šä¸ª key è·å–å¤šä¸ª String ç±»å‹çš„ value <code>MGET k1 k2</code></li>\n<li>INCRï¼šè®©ä¸€ä¸ªæ•´å‹çš„ key è‡ªå¢ 1 <code>INCR age</code>\n<ul>\n<li>INCRBY: è®©ä¸€ä¸ªæ•´å‹çš„ key è‡ªå¢å¹¶<strong>æŒ‡å®šæ­¥é•¿</strong>ï¼Œä¾‹å¦‚ï¼šincrby num 2 è®© num å€¼è‡ªå¢ 2 <code>INCRBY age 2</code></li>\n</ul>\n</li>\n<li>INCRBYFLOATï¼šè®©ä¸€ä¸ªæµ®ç‚¹ç±»å‹çš„æ•°å­—è‡ªå¢å¹¶<strong>æŒ‡å®šæ­¥é•¿</strong> <code>INCRBYFLOAT score 0.5</code></li>\n<li>SETNXï¼šæ·»åŠ ä¸€ä¸ª String ç±»å‹çš„é”®å€¼å¯¹ï¼Œå‰ææ˜¯è¿™ä¸ª key ä¸å­˜åœ¨ï¼Œå¦åˆ™ä¸æ‰§è¡Œ <code>SETNX name lisi//æˆ–è€…set name lisi nx</code></li>\n<li>SETEXï¼šæ·»åŠ ä¸€ä¸ª String ç±»å‹çš„é”®å€¼å¯¹ï¼Œå¹¶ä¸”æŒ‡å®šæœ‰æ•ˆæœŸ <code>SETEX name 10 Jack//æˆ–è€…set name lisi ex 10</code></li>\n</ul>\n<h1 id=\"rediså‘½ä»¤-keyçš„å±‚çº§æ ¼å¼\"><a class=\"anchor\" href=\"#rediså‘½ä»¤-keyçš„å±‚çº§æ ¼å¼\">#</a> Redis å‘½ä»¤ - Key çš„å±‚çº§æ ¼å¼</h1>\n<p>Redis çš„ key å…è®¸æœ‰å¤šä¸ªå•è¯å½¢æˆå±‚çº§ç»“æ„ï¼Œå¤šä¸ªå•è¯ä¹‹é—´ç”¨ ':' éš”å¼€ï¼Œæ ¼å¼å¦‚ï¼š <code>é¡¹ç›®å:ä¸šåŠ¡å:ç±»å‹:id</code></p>\n<p>è¿™ä¸ªæ ¼å¼å¹¶éå›ºå®šï¼Œä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥åˆ é™¤æˆ–æ·»åŠ è¯æ¡ã€‚</p>\n<p>ä¾‹å¦‚æˆ‘ä»¬çš„é¡¹ç›®åç§°å« heimaï¼Œæœ‰ user å’Œ product ä¸¤ç§ä¸åŒç±»å‹çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ keyï¼š</p>\n<ul>\n<li>uuser ç›¸å…³çš„ keyï¼šheima:user:1</li>\n<li>uproduct ç›¸å…³çš„ keyï¼šheima:product:1</li>\n</ul>\n<p>å¦‚æœ Value æ˜¯ä¸€ä¸ª Java å¯¹è±¡ï¼Œä¾‹å¦‚ä¸€ä¸ª User å¯¹è±¡ï¼Œåˆ™å¯ä»¥å°†å¯¹è±¡åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²åå­˜å‚¨ï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202407031842233.png\" alt=\"\" /></p>\n<h1 id=\"rediså‘½ä»¤-hashç±»å‹\"><a class=\"anchor\" href=\"#rediså‘½ä»¤-hashç±»å‹\">#</a> Redis å‘½ä»¤ - Hash ç±»å‹</h1>\n<div class=\"note info\">\n<p>Hash ç±»å‹ï¼Œä¹Ÿå«æ•£åˆ—ï¼Œå…¶ value æ˜¯ä¸€ä¸ªæ— åºå­—å…¸ï¼Œç±»ä¼¼äº Java ä¸­çš„ HashMap ç»“æ„ã€‚</p>\n<p>Hash ç±»å‹çš„å¸¸è§å‘½ä»¤ï¼Œåªæ˜¯ç›¸è¾ƒäº String ç±»å‹çš„å¸¸è§å‘½ä»¤å‰åŠ  <code>H</code></p>\n</div>\n<p>String ç»“æ„æ˜¯å°†å¯¹è±¡åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²åå­˜å‚¨ï¼Œå½“éœ€è¦ä¿®æ”¹å¯¹è±¡æŸä¸ªå­—æ®µæ—¶å¾ˆä¸æ–¹ä¾¿ï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202407041815144.webp\" alt=\"\" /></p>\n<p>Hash ç»“æ„å¯ä»¥å°†å¯¹è±¡ä¸­çš„æ¯ä¸ªå­—æ®µç‹¬ç«‹å­˜å‚¨ï¼Œå¯ä»¥é’ˆå¯¹å•ä¸ªå­—æ®µåš CRUDï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202407041818987.webp\" alt=\"\" /></p>\n<h2 id=\"hashç±»å‹çš„å¸¸è§å‘½ä»¤\"><a class=\"anchor\" href=\"#hashç±»å‹çš„å¸¸è§å‘½ä»¤\">#</a> Hash ç±»å‹çš„å¸¸è§å‘½ä»¤</h2>\n<ul>\n<li>HSET key field valueï¼š<strong>æ·»åŠ </strong>æˆ–è€…<strong>ä¿®æ”¹</strong> hash ç±»å‹ key çš„ field çš„å€¼ <code>HSET heima:user:3 name Lucy</code></li>\n<li>HGET key fieldï¼šè·å–ä¸€ä¸ª hash ç±»å‹ key çš„ field çš„å€¼ <code>HGET heima:user:3 name</code></li>\n<li>HMSETï¼šæ‰¹é‡æ·»åŠ å¤šä¸ª hash ç±»å‹ key çš„ field çš„å€¼ <code>HMSET heima:user:4 name LiLei age 20 sex man</code></li>\n<li>HMGETï¼šæ‰¹é‡è·å–å¤šä¸ª hash ç±»å‹ key çš„ field çš„å€¼ <code>HMGET heima:user:4 name age sex</code></li>\n<li>HGETALLï¼šè·å–ä¸€ä¸ª hash ç±»å‹çš„ key ä¸­çš„æ‰€æœ‰çš„ field å’Œ value <code>HGETALL heima:user:4</code></li>\n<li>HKEYSï¼šè·å–ä¸€ä¸ª hash ç±»å‹çš„ key ä¸­çš„æ‰€æœ‰çš„ field <code>HKEYS heima:user:4</code></li>\n<li>HVALSï¼šè·å–ä¸€ä¸ª hash ç±»å‹çš„ key ä¸­çš„æ‰€æœ‰çš„ value <code>HVALS heima:user:4</code></li>\n<li>HINCRBY: è®©ä¸€ä¸ª hash ç±»å‹ key çš„å­—æ®µå€¼è‡ªå¢ï¼ˆæŒ‡å®šè´Ÿæ•°å³ä¸ºè‡ªå‡ï¼‰å¹¶æŒ‡å®šæ­¥é•¿ <code>HINCRBY heima:user:4 age 2</code></li>\n<li>HSETNXï¼šæ·»åŠ ä¸€ä¸ª hash ç±»å‹çš„ key çš„ field å€¼ï¼Œå‰ææ˜¯è¿™ä¸ª field ä¸å­˜åœ¨ï¼Œå¦åˆ™ä¸æ‰§è¡Œ <code>HSETNX heima:user:4 sex woman</code>  ç”±äºå·²ç»æœ‰ sex å­—æ®µï¼Œåˆ™è¿”å› 0 å¤±è´¥</li>\n</ul>\n<h1 id=\"rediså‘½ä»¤-listç±»å‹\"><a class=\"anchor\" href=\"#rediså‘½ä»¤-listç±»å‹\">#</a> Redis å‘½ä»¤ - List ç±»å‹</h1>\n<div class=\"note info\">\n<p>Redis ä¸­çš„ List ç±»å‹ä¸ Java ä¸­çš„ LinkedList ç±»ä¼¼ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ª<strong>åŒå‘é“¾è¡¨</strong>ç»“æ„ã€‚æ—¢å¯ä»¥æ”¯æŒæ­£å‘æ£€ç´¢å’Œä¹Ÿå¯ä»¥æ”¯æŒåå‘æ£€ç´¢ã€‚ç‰¹å¾ä¹Ÿä¸ LinkedList ç±»ä¼¼ï¼š</p>\n<ul>\n<li>æœ‰åº</li>\n<li>å…ƒç´ å¯ä»¥é‡å¤</li>\n<li>æ’å…¥å’Œåˆ é™¤å¿«</li>\n<li>æŸ¥è¯¢é€Ÿåº¦ä¸€èˆ¬</li>\n</ul>\n<p>å¸¸ç”¨æ¥å­˜å‚¨ä¸€ä¸ªæœ‰åºæ•°æ®ï¼Œä¾‹å¦‚ï¼šæœ‹å‹åœˆç‚¹èµåˆ—è¡¨ï¼Œè¯„è®ºåˆ—è¡¨ç­‰ã€‚</p>\n</div>\n<p><span class=\"red\">List çš„å¸¸è§å‘½ä»¤ï¼š</span></p>\n<ul>\n<li><strong>L</strong>PUSH key element ... ï¼šå‘åˆ—è¡¨<strong>å·¦ä¾§</strong>æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´  (å¤´æ’æ³•) <code>LPUSH users 1 2</code></li>\n<li>LPOP key [count]ï¼šç§»é™¤å¹¶<strong>è¿”å›</strong>åˆ—è¡¨å·¦ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰åˆ™è¿”å› nil <code>LPOP users 1</code></li>\n<li><strong>R</strong>PUSH key element ... ï¼šå‘åˆ—è¡¨<strong>å³ä¾§</strong>æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´  (å°¾æ’æ³•) <code>LPUSH users 3 4</code></li>\n<li>RPOP key [count]ï¼šç§»é™¤å¹¶<strong>è¿”å›</strong>åˆ—è¡¨å³ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´  <code>RPOP users 1</code></li>\n<li>LRANGE key star endï¼šè¿”å›ä¸€æ®µ<strong>è§’æ ‡èŒƒå›´</strong>å†…çš„æ‰€æœ‰å…ƒç´  <code>LRANGE users 1 2</code></li>\n<li>BLPOP å’Œ BRPOPï¼šä¸ LPOP å’Œ RPOP ç±»ä¼¼ï¼Œåªä¸è¿‡åœ¨æ²¡æœ‰å…ƒç´ æ—¶ç­‰å¾…æŒ‡å®šæ—¶é—´ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å› nil (é˜»å¡æ¨¡å¼) <code>BLPOP users2 [timeout]</code></li>\n</ul>\n<h1 id=\"rediså‘½ä»¤-setç±»å‹\"><a class=\"anchor\" href=\"#rediså‘½ä»¤-setç±»å‹\">#</a> Redis å‘½ä»¤ - Set ç±»å‹</h1>\n<div class=\"note info\">\n<p>Redis çš„ Set ç»“æ„ä¸ Java ä¸­çš„ HashSet ç±»ä¼¼ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ª value ä¸º null çš„ HashMapã€‚å› ä¸ºä¹Ÿæ˜¯ä¸€ä¸ª hash è¡¨ï¼Œå› æ­¤å…·å¤‡ä¸ HashSet ç±»ä¼¼çš„ç‰¹å¾ï¼š</p>\n<ul>\n<li>æ— åº</li>\n<li>å…ƒç´ ä¸å¯é‡å¤</li>\n<li>æŸ¥æ‰¾å¿«</li>\n<li>æ”¯æŒäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰åŠŸèƒ½</li>\n</ul>\n</div>\n<p><span class=\"red\">Set çš„å¸¸è§å‘½ä»¤ï¼š</span></p>\n<ul>\n<li>SADD key member ... ï¼šå‘ set ä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´  <code>SADD s1 a b c</code></li>\n<li>SREM key member ... : ç§»é™¤ set ä¸­çš„æŒ‡å®šå…ƒç´  <code>SREM s1 a</code></li>\n<li>SCARD keyï¼š è¿”å› set ä¸­å…ƒç´ çš„ä¸ªæ•° <code>SCARD s1</code></li>\n<li>SISMEMBER key memberï¼šåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äº set ä¸­ <code>SISMEMBER s1 a</code></li>\n<li>SMEMBERSï¼šè·å– set ä¸­çš„æ‰€æœ‰å…ƒç´  <code>SMEMBERS s1</code></li>\n<li>SINTER key1 key2 ... ï¼šæ±‚ key1 ä¸ key2 çš„äº¤é›†</li>\n<li>SDIFF key1 key2 ... ï¼šæ±‚ key1 ä¸ key2 çš„å·®é›†</li>\n<li>SUNION key1 key2 ..ï¼šæ±‚ key1 å’Œ key2 çš„å¹¶é›†</li>\n</ul>\n<h1 id=\"rediså‘½ä»¤-sortedsetç±»å‹\"><a class=\"anchor\" href=\"#rediså‘½ä»¤-sortedsetç±»å‹\">#</a> Redis å‘½ä»¤ - SortedSet ç±»å‹</h1>\n<div class=\"note info\">\n<p>Redis çš„ SortedSet æ˜¯ä¸€ä¸ªå¯æ’åºçš„ set é›†åˆï¼Œä¸ Java ä¸­çš„ TreeSet æœ‰äº›ç±»ä¼¼ï¼Œä½†åº•å±‚æ•°æ®ç»“æ„å´å·®åˆ«å¾ˆå¤§ã€‚SortedSet ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½å¸¦æœ‰ä¸€ä¸ª score å±æ€§ï¼Œå¯ä»¥åŸºäº score å±æ€§å¯¹å…ƒç´ æ’åºï¼Œåº•å±‚çš„å®ç°æ˜¯ä¸€ä¸ªè·³è¡¨ï¼ˆSkipListï¼‰åŠ  hash è¡¨ã€‚</p>\n<p>SortedSet å…·å¤‡ä¸‹åˆ—ç‰¹æ€§ï¼š</p>\n<ul>\n<li>å¯æ’åº</li>\n<li>å…ƒç´ ä¸é‡å¤</li>\n<li>æŸ¥è¯¢é€Ÿåº¦å¿«</li>\n</ul>\n<p>å› ä¸º SortedSet çš„å¯æ’åºç‰¹æ€§ï¼Œç»å¸¸è¢«ç”¨æ¥å®ç°æ’è¡Œæ¦œè¿™æ ·çš„åŠŸèƒ½ã€‚</p>\n</div>\n<p><span class=\"red\">SortedSet çš„å¸¸è§å‘½ä»¤ï¼š</span></p>\n<ul>\n<li>ZADD key score memberï¼šæ·»åŠ <strong>ä¸€ä¸ª</strong>æˆ–<strong>å¤šä¸ª</strong>å…ƒç´ åˆ° sorted set ï¼Œå¦‚æœå·²ç»å­˜åœ¨åˆ™æ›´æ–°å…¶ score å€¼ <code>ZADD stus 85 Jack 89 Lucy 82 Rose 95 Tom</code></li>\n<li>ZREM key memberï¼šåˆ é™¤ sorted set ä¸­çš„ä¸€ä¸ªæŒ‡å®šå…ƒç´  <code>ZREM stus Lucy</code></li>\n<li>ZSCORE key member : è·å– sorted set ä¸­çš„æŒ‡å®šå…ƒç´ çš„ score å€¼ <code>ZSCORE stus Jack</code></li>\n<li>ZRANK key memberï¼šè·å– sorted set ä¸­çš„æŒ‡å®šå…ƒç´ çš„<strong>æ’å (ä» 0 å¼€å§‹)</strong> <code>ZRANK stus Rose</code></li>\n<li>ZCARD keyï¼šè·å– sorted set ä¸­çš„å…ƒç´ ä¸ªæ•° <code>ZCARD stus</code></li>\n<li>ZCOUNT key min maxï¼šç»Ÿè®¡ score å€¼åœ¨ç»™å®šèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ çš„ä¸ªæ•° <code>ZCOUNT stus 0 80</code></li>\n<li>ZINCRBY key increment memberï¼šè®© sorted set ä¸­çš„æŒ‡å®šå…ƒç´ è‡ªå¢ï¼Œæ­¥é•¿ä¸ºæŒ‡å®šçš„ increment å€¼ <code>ZINCRBY stus 2 Jack</code></li>\n<li>ZRANGE key min maxï¼šæŒ‰ç…§ score æ’åºåï¼Œè·å–æŒ‡å®šæ’åèŒƒå›´å†…çš„å…ƒç´  <code>ZRANGE stus 0 2</code></li>\n<li>ZRANGEBYSCORE key min maxï¼šæŒ‰ç…§ score æ’åºåï¼Œè·å–æŒ‡å®š score èŒƒå›´å†…çš„å…ƒç´  <code>ZRANGEBYSCORE stus 0 80</code></li>\n<li>ZDIFFã€ZINTERã€ZUNIONï¼šæ±‚å·®é›†ã€äº¤é›†ã€å¹¶é›†</li>\n</ul>\n<p>æ³¨æ„ï¼šæ‰€æœ‰çš„æ’åé»˜è®¤éƒ½æ˜¯<span class=\"red\">å‡åº</span>ï¼Œå¦‚æœè¦é™åºåˆ™åœ¨å‘½ä»¤çš„ <code>Z</code>  åé¢æ·»åŠ  <code>REV</code>  å³å¯</p>\n",
            "tags": [
                "ç¬”è®°",
                "åç«¯,Redis"
            ]
        },
        {
            "id": "https://ruler64.github.io/hexo/Docker%E5%AD%A6%E4%B9%A0/",
            "url": "https://ruler64.github.io/hexo/Docker%E5%AD%A6%E4%B9%A0/",
            "title": "Dockerçš„å­¦ä¹ ",
            "date_published": "2024-04-08T11:32:44.000Z",
            "content_html": "<h1 id=\"å¿«é€Ÿå…¥é—¨\"><a class=\"anchor\" href=\"#å¿«é€Ÿå…¥é—¨\">#</a> å¿«é€Ÿå…¥é—¨</h1>\n<h3 id=\"éƒ¨ç½²mysql\"><a class=\"anchor\" href=\"#éƒ¨ç½²mysql\">#</a> éƒ¨ç½² MySQL</h3>\n<p>é¦–å…ˆï¼Œåˆ©ç”¨ Docker æ¥å®‰è£…ä¸€ä¸ª MySQL è½¯ä»¶ã€‚ä½¿ç”¨ Docker å®‰è£…ï¼Œä»…ä»…éœ€è¦ä¸€æ­¥å³å¯ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼ˆå»ºè®®é‡‡ç”¨ CV å¤§æ³•ï¼‰ï¼š</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>docker run <span class=\"token operator\">-</span>d \\</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token operator\">--</span>name mysql \\</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token operator\">-</span>p 3306:3306 \\</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token operator\">-</span>e TZ=Asia/Shanghai \\</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token operator\">-</span>e MYSQL_ROOT_PASSWORD=123 \\</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  mysql</pre></td></tr></table></figure><p>MySQL å®‰è£…å®Œæ¯•ï¼é€šè¿‡ä»»æ„å®¢æˆ·ç«¯å·¥å…·å³å¯è¿æ¥åˆ° MySQL</p>\n<div class=\"note primary\">\n<p>Docker å®‰è£…è½¯ä»¶çš„è¿‡ç¨‹ï¼Œå°±æ˜¯è‡ªåŠ¨æœç´¢ä¸‹è½½é•œåƒï¼Œç„¶ååˆ›å»ºå¹¶è¿è¡Œå®¹å™¨çš„è¿‡ç¨‹ã€‚</p>\n</div>\n<p>Docker ä¼šæ ¹æ®å‘½ä»¤ä¸­çš„é•œåƒåç§°è‡ªåŠ¨æœç´¢å¹¶ä¸‹è½½é•œåƒï¼ŒDocker å®˜æ–¹æä¾›äº†ä¸€ä¸ªä¸“é—¨ç®¡ç†ã€å­˜å‚¨é•œåƒçš„ç½‘ç«™ï¼Œå¹¶å¯¹å¤–å¼€æ”¾äº†é•œåƒä¸Šä¼ ã€ä¸‹è½½çš„æƒåˆ©ã€‚Docker å®˜æ–¹æä¾›äº†ä¸€äº›åŸºç¡€é•œåƒï¼Œç„¶åå„å¤§è½¯ä»¶å…¬å¸åˆåœ¨åŸºç¡€é•œåƒåŸºç¡€ä¸Šï¼Œåˆ¶ä½œäº†è‡ªå®¶è½¯ä»¶çš„é•œåƒï¼Œå…¨éƒ¨éƒ½å­˜æ”¾åœ¨è¿™ä¸ªç½‘ç«™ã€‚è¿™ä¸ªç½‘ç«™å°±æˆäº† Docker é•œåƒäº¤æµçš„ç¤¾åŒºï¼š</p>\n<p><div class=\"links\"><div class=\"item\" title=\"Docker\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS8=\" data-background-image=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/avater.jpg\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS8=\">hub.docker.com</span>\n          <p class=\"desc\">Dockeré•œåƒäº¤æµç¤¾åŒº</p>\n          </div></div></div></p>\n<p>åŸºæœ¬ä¸Šæˆ‘ä»¬å¸¸ç”¨çš„å„ç§è½¯ä»¶éƒ½èƒ½åœ¨è¿™ä¸ªç½‘ç«™ä¸Šæ‰¾åˆ°ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥è‡ªå·±åˆ¶ä½œé•œåƒä¸Šä¼ ä¸Šå»ã€‚</p>\n<p>åƒè¿™ç§æä¾›å­˜å‚¨ã€ç®¡ç† Docker é•œåƒçš„æœåŠ¡å™¨ï¼Œè¢«ç§°ä¸º DockerRegistryï¼Œå¯ä»¥ç¿»è¯‘ä¸ºé•œåƒä»“åº“ã€‚DockerHub ç½‘ç«™æ˜¯å®˜æ–¹ä»“åº“ï¼Œé˜¿é‡Œäº‘ã€åä¸ºäº‘ä¼šæä¾›ä¸€äº›ç¬¬ä¸‰æ–¹ä»“åº“ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±æ­å»ºç§æœ‰çš„é•œåƒä»“åº“ã€‚</p>\n<p>å®˜æ–¹ä»“åº“åœ¨å›½å¤–ï¼Œä¸‹è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šä½¿ç”¨ç¬¬ä¸‰æ–¹ä»“åº“æä¾›çš„é•œåƒåŠ é€ŸåŠŸèƒ½ï¼Œæé«˜ä¸‹è½½é€Ÿåº¦ã€‚è€Œä¼ä¸šå†…éƒ¨çš„æœºå¯†é¡¹ç›®ï¼Œå¾€å¾€ä¼šé‡‡ç”¨ç§æœ‰é•œåƒä»“åº“ã€‚</p>\n<p>æ€»ä¹‹ï¼Œé•œåƒçš„æ¥æºæœ‰ä¸¤ç§ï¼š</p>\n<ul>\n<li>åŸºäºå®˜æ–¹åŸºç¡€é•œåƒè‡ªå·±åˆ¶ä½œ</li>\n<li>ç›´æ¥å» DockerRegistry ä¸‹è½½</li>\n</ul>\n<h3 id=\"å‘½ä»¤è§£è¯»\"><a class=\"anchor\" href=\"#å‘½ä»¤è§£è¯»\">#</a> å‘½ä»¤è§£è¯»</h3>\n<p>åˆ©ç”¨ Docker å¿«é€Ÿçš„å®‰è£…äº† MySQLï¼Œéå¸¸çš„æ–¹ä¾¿ï¼Œä¸è¿‡æˆ‘ä»¬æ‰§è¡Œçš„å‘½ä»¤åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>docker run <span class=\"token operator\">-</span>d \\</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token operator\">--</span>name mysql \\</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token operator\">-</span>p 3306:3306 \\</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token operator\">-</span>e TZ=Asia/Shanghai \\</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token operator\">-</span>e MYSQL_ROOT_PASSWORD=123 \\</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  mysql</pre></td></tr></table></figure><p>è§£è¯»ï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404071611385.png\" alt=\"\" /></p>\n<ul>\n<li><code>docker run -d</code>  ï¼šåˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œ <code>-d</code>  åˆ™æ˜¯è®©å®¹å™¨ä»¥åå°è¿›ç¨‹è¿è¡Œ</li>\n<li><code>--name mysql </code>  : ç»™å®¹å™¨èµ·ä¸ªåå­—å« <code>mysql</code> ï¼Œä½ å¯ä»¥å«åˆ«çš„</li>\n<li><code>-p 3306:3306</code>  : è®¾ç½®ç«¯å£æ˜ å°„ã€‚\n<ul>\n<li><strong>å®¹å™¨æ˜¯éš”ç¦»ç¯å¢ƒ</strong>ï¼Œå¤–ç•Œä¸å¯è®¿é—®ã€‚ä½†æ˜¯å¯ä»¥<strong>å°†å®¿ä¸»æœºç«¯å£æ˜ å°„å®¹å™¨å†…åˆ°ç«¯å£</strong>ï¼Œå½“è®¿é—®å®¿ä¸»æœºæŒ‡å®šç«¯å£æ—¶ï¼Œå°±æ˜¯åœ¨è®¿é—®å®¹å™¨å†…çš„ç«¯å£äº†ã€‚</li>\n<li>å®¹å™¨å†…ç«¯å£å¾€å¾€æ˜¯ç”±å®¹å™¨å†…çš„è¿›ç¨‹å†³å®šï¼Œä¾‹å¦‚ MySQL è¿›ç¨‹é»˜è®¤ç«¯å£æ˜¯ 3306ï¼Œå› æ­¤å®¹å™¨å†…ç«¯å£ä¸€å®šæ˜¯ 3306ï¼›è€Œå®¿ä¸»æœºç«¯å£åˆ™å¯ä»¥ä»»æ„æŒ‡å®šï¼Œä¸€èˆ¬ä¸å®¹å™¨å†…ä¿æŒä¸€è‡´ã€‚</li>\n<li>æ ¼å¼ï¼š  <code>-p å®¿ä¸»æœºç«¯å£:å®¹å™¨å†…ç«¯å£</code> ï¼Œç¤ºä¾‹ä¸­å°±æ˜¯å°†å®¿ä¸»æœºçš„ 3306 æ˜ å°„åˆ°å®¹å™¨å†…çš„ 3306 ç«¯å£</li>\n</ul>\n</li>\n<li><code>-e TZ=Asia/Shanghai</code>  : é…ç½®å®¹å™¨å†…è¿›ç¨‹è¿è¡Œæ—¶çš„ä¸€äº›å‚æ•°\n<ul>\n<li>æ ¼å¼ï¼š <code>-e KEY=VALUE</code> ï¼ŒKEY å’Œ VALUE éƒ½ç”±å®¹å™¨å†…è¿›ç¨‹å†³å®š</li>\n<li>æ¡ˆä¾‹ä¸­ï¼Œ <code>TZ=Asia/Shanghai</code>  æ˜¯è®¾ç½®æ—¶åŒºï¼› <code>MYSQL_ROOT_PASSWORD=123</code>  æ˜¯è®¾ç½® MySQL é»˜è®¤å¯†ç </li>\n</ul>\n</li>\n<li><code>mysql</code>  : è®¾ç½®<strong>é•œåƒ</strong>åç§°ï¼ŒDocker ä¼šæ ¹æ®è¿™ä¸ªåå­—æœç´¢å¹¶ä¸‹è½½é•œåƒ\n<ul>\n<li>æ ¼å¼ï¼š <code>REPOSITORY:TAG</code> ï¼Œä¾‹å¦‚ <code>mysql:8.0</code> ï¼Œå…¶ä¸­ <code>REPOSITORY</code>  å¯ä»¥ç†è§£ä¸ºé•œåƒåï¼Œ <code>TAG</code>  æ˜¯ç‰ˆæœ¬å·</li>\n<li>åœ¨æœªæŒ‡å®š <code>TAG</code>  çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ <code>mysql:latest</code></li>\n</ul>\n</li>\n</ul>\n<p>é•œåƒçš„åç§°ä¸æ˜¯éšæ„çš„ï¼Œè€Œæ˜¯è¦åˆ° DockerRegistry ä¸­å¯»æ‰¾ï¼Œé•œåƒè¿è¡Œæ—¶çš„é…ç½®ä¹Ÿä¸æ˜¯éšæ„çš„ï¼Œè¦å‚è€ƒé•œåƒçš„å¸®åŠ©æ–‡æ¡£ï¼Œè¿™äº›åœ¨ DockerHub ç½‘ç«™æˆ–è€…è½¯ä»¶çš„å®˜æ–¹ç½‘ç«™ä¸­éƒ½èƒ½æ‰¾åˆ°ã€‚</p>\n<h1 id=\"dockeråŸºç¡€\"><a class=\"anchor\" href=\"#dockeråŸºç¡€\">#</a> Docker åŸºç¡€</h1>\n<h3 id=\"å¸¸è§å‘½ä»¤\"><a class=\"anchor\" href=\"#å¸¸è§å‘½ä»¤\">#</a> å¸¸è§å‘½ä»¤</h3>\n<p>å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p>\n<p><div class=\"links\"><div class=\"item\" title=\"Docker\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9jbGkv\" data-background-image=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/avater.jpg\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9jbGkv\">Use the Docker command line</span>\n          <p class=\"desc\">Docker's CLI command description and usage</p>\n          </div></div></div></p>\n<h4 id=\"å‘½ä»¤ä»‹ç»\"><a class=\"anchor\" href=\"#å‘½ä»¤ä»‹ç»\">#</a> å‘½ä»¤ä»‹ç»</h4>\n<p>å…¶ä¸­ï¼Œæ¯”è¾ƒå¸¸è§çš„å‘½ä»¤æœ‰ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"><strong>å‘½ä»¤</strong></th>\n<th style=\"text-align:center\"><strong>è¯´æ˜</strong></th>\n<th style=\"text-align:center\"><strong>æ–‡æ¡£åœ°å€</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">docker pull</td>\n<td style=\"text-align:center\">æ‹‰å–é•œåƒ</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9wdWxsLw==\">docker pull</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker push</td>\n<td style=\"text-align:center\">æ¨é€é•œåƒåˆ° DockerRegistry</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9wdXNoLw==\">docker push</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker images</td>\n<td style=\"text-align:center\">æŸ¥çœ‹æœ¬åœ°é•œåƒ</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9pbWFnZXMv\">docker images</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker rmi</td>\n<td style=\"text-align:center\">åˆ é™¤æœ¬åœ°é•œåƒ</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9ybWkv\">docker rmi</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker run</td>\n<td style=\"text-align:center\">åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨ï¼ˆä¸èƒ½é‡å¤åˆ›å»ºï¼‰</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9ydW4v\">docker run</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker stop</td>\n<td style=\"text-align:center\">åœæ­¢æŒ‡å®šå®¹å™¨</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9zdG9wLw==\">docker stop</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker start</td>\n<td style=\"text-align:center\">å¯åŠ¨æŒ‡å®šå®¹å™¨</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9zdGFydC8=\">docker start</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker restart</td>\n<td style=\"text-align:center\">é‡æ–°å¯åŠ¨å®¹å™¨</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9yZXN0YXJ0Lw==\">docker restart</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker rm</td>\n<td style=\"text-align:center\">åˆ é™¤æŒ‡å®šå®¹å™¨</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9ybS8=\">docs.docker.com</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker ps</td>\n<td style=\"text-align:center\">æŸ¥çœ‹å®¹å™¨</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9wcy8=\">docker ps</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker logs</td>\n<td style=\"text-align:center\">æŸ¥çœ‹å®¹å™¨è¿è¡Œæ—¥å¿—</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9sb2dzLw==\">docker logs</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker exec</td>\n<td style=\"text-align:center\">è¿›å…¥å®¹å™¨</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9leGVjLw==\">docker exec</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker save</td>\n<td style=\"text-align:center\">ä¿å­˜é•œåƒåˆ°æœ¬åœ°å‹ç¼©æ–‡ä»¶</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9zYXZlLw==\">docker save</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker load</td>\n<td style=\"text-align:center\">åŠ è½½æœ¬åœ°å‹ç¼©æ–‡ä»¶åˆ°é•œåƒ</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9sb2FkLw==\">docker load</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker inspect</td>\n<td style=\"text-align:center\">æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9pbnNwZWN0Lw==\">docker inspect</span></td>\n</tr>\n</tbody>\n</table>\n<p>ç”¨ä¸€å‰¯å›¾æ¥è¡¨ç¤ºè¿™äº›å‘½ä»¤çš„å…³ç³»ï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404071122855.png\" alt=\"\" /></p>\n<p>è¡¥å……ï¼š</p>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯æ¬¡é‡å¯è™šæ‹Ÿæœºæˆ‘ä»¬éƒ½éœ€è¦æ‰‹åŠ¨å¯åŠ¨ Docker å’Œ Docker ä¸­çš„å®¹å™¨ã€‚é€šè¿‡å‘½ä»¤å¯ä»¥å®ç°å¼€æœºè‡ªå¯ï¼š</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># Docker å¼€æœºè‡ªå¯</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>systemctl enable docker</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># Docker å®¹å™¨å¼€æœºè‡ªå¯</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>docker update <span class=\"token operator\">--</span>restart=always <span class=\"token punctuation\">[</span>å®¹å™¨å<span class=\"token operator\">/</span>å®¹å™¨id<span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h4 id=\"æ¼”ç¤º\"><a class=\"anchor\" href=\"#æ¼”ç¤º\">#</a> æ¼”ç¤º</h4>\n<p>ä»¥ Nginx ä¸ºä¾‹æ¼”ç¤ºä¸Šè¿°å‘½ä»¤ã€‚</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ç¬¬ 1 æ­¥ï¼Œå» DockerHub æŸ¥çœ‹ nginx é•œåƒä»“åº“åŠç›¸å…³ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># ç¬¬ 2 æ­¥ï¼Œæ‹‰å– Nginx é•œåƒ</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>docker pull nginx</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># ç¬¬ 3 æ­¥ï¼ŒæŸ¥çœ‹é•œåƒ</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>docker images</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># ç»“æœå¦‚ä¸‹ï¼š</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>REPOSITORY   TAG       IMAGE ID       CREATED         SIZE</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>nginx        latest    605c77e624dd   16 months ago   141MB</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>mysql        latest    3218b38490ce   17 months ago   516MB</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># ç¬¬ 4 æ­¥ï¼Œåˆ›å»ºå¹¶å…è®¸ Nginx å®¹å™¨</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>docker run <span class=\"token operator\">-</span>d <span class=\"token operator\">--</span>name nginx <span class=\"token operator\">-</span>p 80:80 nginx</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># ç¬¬ 5 æ­¥ï¼ŒæŸ¥çœ‹è¿è¡Œä¸­å®¹å™¨</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>docker <span class=\"token function\">ps</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># ä¹Ÿå¯ä»¥åŠ æ ¼å¼åŒ–æ–¹å¼è®¿é—®ï¼Œæ ¼å¼ä¼šæ›´åŠ æ¸…çˆ½</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>&lt;<span class=\"token operator\">!</span><span class=\"token operator\">--</span>swigï¿¼2-<span class=\"token operator\">-</span>></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># ç¬¬ 6 æ­¥ï¼Œè®¿é—®ç½‘é¡µï¼Œåœ°å€ï¼šhttp:// è™šæ‹Ÿæœºåœ°å€</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># ç¬¬ 7 æ­¥ï¼Œåœæ­¢å®¹å™¨</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>docker stop nginx</pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># ç¬¬ 8 æ­¥ï¼ŒæŸ¥çœ‹æ‰€æœ‰å®¹å™¨</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>&lt;<span class=\"token operator\">!</span><span class=\"token operator\">--</span>swigï¿¼3-<span class=\"token operator\">-</span>></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\"># ç¬¬ 9 æ­¥ï¼Œå†æ¬¡å¯åŠ¨ nginx å®¹å™¨</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>docker <span class=\"token function\">start</span> nginx</pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\"># ç¬¬ 10 æ­¥ï¼Œå†æ¬¡æŸ¥çœ‹å®¹å™¨</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>&lt;<span class=\"token operator\">!</span><span class=\"token operator\">--</span>swigï¿¼4-<span class=\"token operator\">-</span>></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token comment\"># ç¬¬ 11 æ­¥ï¼ŒæŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>docker inspect nginx</pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token comment\"># ç¬¬ 12 æ­¥ï¼Œè¿›å…¥å®¹å™¨ï¼ŒæŸ¥çœ‹å®¹å™¨å†…ç›®å½•</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>docker exec <span class=\"token operator\">-</span>it nginx bash</pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token comment\"># æˆ–è€…ï¼Œå¯ä»¥è¿›å…¥ MySQL</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>docker exec <span class=\"token operator\">-</span>it mysql mysql <span class=\"token operator\">-</span>uroot <span class=\"token operator\">-</span>p</pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token comment\"># ç¬¬ 13 æ­¥ï¼Œåˆ é™¤å®¹å™¨</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>docker <span class=\"token function\">rm</span> nginx</pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token comment\"># å‘ç°æ— æ³•åˆ é™¤ï¼Œå› ä¸ºå®¹å™¨è¿è¡Œä¸­ï¼Œå¼ºåˆ¶åˆ é™¤å®¹å™¨</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>docker <span class=\"token function\">rm</span> <span class=\"token operator\">-</span>f nginx</pre></td></tr></table></figure><h4 id=\"å‘½ä»¤åˆ«å\"><a class=\"anchor\" href=\"#å‘½ä»¤åˆ«å\">#</a> å‘½ä»¤åˆ«å</h4>\n<p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„ vim å‘½ä»¤ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼š i ï¼ˆåœ¨å½“å‰ä½ç½®æ’å…¥ï¼Œå¼€å§‹ç¼–è¾‘ï¼‰ï¼›</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#ä¿å­˜ç¼–è¾‘æ–‡æœ¬ï¼š :w (è‹±æ–‡å†’å·ï¼Œä¿å­˜å½“å‰ç¼–è¾‘çš„æ–‡ä»¶ï¼‰ï¼›</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#é€€å‡ºç¼–è¾‘æ–‡ä»¶ï¼š :qï¼ˆè‹±æ–‡å†’å·ï¼Œé€€å‡ºå½“å‰ç¼–è¾‘çš„æ–‡ä»¶ï¼‰ï¼›</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#ä¿å­˜å¹¶é€€å‡ºï¼š :wq ï¼ˆè‹±æ–‡å†’å·ï¼Œä¿å­˜å¹¶é€€å‡ºå½“å‰ç¼–è¾‘çš„æ–‡ä»¶ï¼‰ï¼›</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#å¼ºåˆ¶é€€å‡ºï¼š    :q! ï¼ˆè‹±æ–‡å†’å·ï¼Œå¼ºåˆ¶é€€å‡ºä¸ä¿å­˜ï¼‰ã€‚</span></pre></td></tr></table></figure><p>ç»™å¸¸ç”¨ Docker å‘½ä»¤èµ·åˆ«åï¼Œæ–¹ä¾¿æˆ‘ä»¬è®¿é—®ï¼š</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ä¿®æ”¹ /root/.bashrc æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>vi <span class=\"token operator\">/</span>root/<span class=\"token punctuation\">.</span>bashrc</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>å†…å®¹å¦‚ä¸‹ï¼š</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># .bashrc</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># User specific aliases and functions</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>alias <span class=\"token function\">rm</span>=<span class=\"token string\">'rm -i'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>alias <span class=\"token function\">cp</span>=<span class=\"token string\">'cp -i'</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>alias <span class=\"token function\">mv</span>=<span class=\"token string\">'mv -i'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>&lt;<span class=\"token operator\">!</span><span class=\"token operator\">--</span>swigï¿¼5-<span class=\"token operator\">-</span>></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>alias dis=<span class=\"token string\">'docker images'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># Source global definitions</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token operator\">-</span>f <span class=\"token operator\">/</span>etc/bashrc <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> then</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">.</span> <span class=\"token operator\">/</span>etc/bashrc</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>fi</pre></td></tr></table></figure><p>ç„¶åï¼Œæ‰§è¡Œå‘½ä»¤ä½¿åˆ«åç”Ÿæ•ˆ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>source <span class=\"token operator\">/</span>root/<span class=\"token punctuation\">.</span>bashrc</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#æˆ–è€… source ~/.bashrc</span></pre></td></tr></table></figure><h3 id=\"æ•°æ®å·\"><a class=\"anchor\" href=\"#æ•°æ®å·\">#</a> æ•°æ®å·</h3>\n<p>å®¹å™¨æ˜¯éš”ç¦»ç¯å¢ƒï¼›å®¹å™¨å†…ç¨‹åºçš„æ–‡ä»¶ã€é…ç½®ã€è¿è¡Œæ—¶äº§ç”Ÿçš„å®¹å™¨éƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæˆ‘ä»¬è¦è¯»å†™å®¹å™¨å†…çš„æ–‡ä»¶éå¸¸ä¸æ–¹ä¾¿ã€‚é‚£ä¹ˆå°±äº§ç”Ÿäº†å‡ ä¸ªé—®é¢˜ï¼š</p>\n<ul>\n<li>å¦‚æœè¦å‡çº§ MySQL ç‰ˆæœ¬ï¼Œéœ€è¦é”€æ¯æ—§å®¹å™¨ï¼Œé‚£ä¹ˆæ•°æ®å²‚ä¸æ˜¯è·Ÿç€è¢«é”€æ¯äº†ï¼Ÿ</li>\n<li>MySQLã€Nginx å®¹å™¨è¿è¡Œåï¼Œå¦‚æœæˆ‘è¦ä¿®æ”¹å…¶ä¸­çš„æŸäº›é…ç½®è¯¥æ€ä¹ˆåŠï¼Ÿ</li>\n<li>æˆ‘æƒ³è¦è®© Nginx ä»£ç†æˆ‘çš„é™æ€èµ„æºæ€ä¹ˆåŠï¼Ÿ</li>\n</ul>\n<p>å› æ­¤ï¼Œå®¹å™¨æä¾›ç¨‹åºçš„è¿è¡Œç¯å¢ƒï¼Œä½†æ˜¯<strong>ç¨‹åºè¿è¡Œäº§ç”Ÿçš„æ•°æ®ã€ç¨‹åºè¿è¡Œä¾èµ–çš„é…ç½®éƒ½åº”è¯¥ä¸å®¹å™¨è§£è€¦</strong>ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯æ•°æ®å·\"><a class=\"anchor\" href=\"#ä»€ä¹ˆæ˜¯æ•°æ®å·\">#</a> ä»€ä¹ˆæ˜¯æ•°æ®å·</h4>\n<p><strong>æ•°æ®å·ï¼ˆvolumeï¼‰<strong>æ˜¯ä¸€ä¸ªè™šæ‹Ÿç›®å½•ï¼Œæ˜¯</strong>å®¹å™¨å†…ç›®å½•</strong>ä¸<strong>å®¿ä¸»æœºç›®å½•</strong>ä¹‹é—´æ˜ å°„çš„æ¡¥æ¢ã€‚</p>\n<p>ä»¥ Nginx ä¸ºä¾‹ï¼Œæˆ‘ä»¬çŸ¥é“ Nginx ä¸­æœ‰ä¸¤ä¸ªå…³é”®çš„ç›®å½•ï¼š</p>\n<ul>\n<li><code>html</code> ï¼šæ”¾ç½®ä¸€äº›é™æ€èµ„æº</li>\n<li><code>conf</code> ï¼šæ”¾ç½®é…ç½®æ–‡ä»¶</li>\n</ul>\n<p>å¦‚æœæˆ‘ä»¬è¦è®© Nginx ä»£ç†æˆ‘ä»¬çš„é™æ€èµ„æºï¼Œæœ€å¥½æ˜¯æ”¾åˆ° <code>html</code>  ç›®å½•ï¼›å¦‚æœæˆ‘ä»¬è¦ä¿®æ”¹ Nginx çš„é…ç½®ï¼Œæœ€å¥½æ˜¯æ‰¾åˆ° <code>conf</code>  ä¸‹çš„ <code>nginx.conf</code>  æ–‡ä»¶ã€‚</p>\n<p>ä½†é—æ†¾çš„æ˜¯ï¼Œå®¹å™¨è¿è¡Œçš„ Nginx æ‰€æœ‰çš„æ–‡ä»¶éƒ½åœ¨å®¹å™¨å†…éƒ¨ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»åˆ©ç”¨æ•°æ®å·å°†ä¸¤ä¸ªç›®å½•ä¸å®¿ä¸»æœºç›®å½•å…³è”ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ“ä½œã€‚å¦‚å›¾ï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404071856386.png\" alt=\"\" /></p>\n<p>åœ¨ä¸Šå›¾ä¸­ï¼š</p>\n<ul>\n<li>æˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªæ•°æ®å·ï¼š <code>conf</code> ã€ <code>html</code></li>\n<li>Nginx å®¹å™¨å†…éƒ¨çš„ <code>conf</code>  ç›®å½•å’Œ <code>html</code>  ç›®å½•åˆ†åˆ«ä¸ä¸¤ä¸ªæ•°æ®å·å…³è”ã€‚</li>\n<li>è€Œæ•°æ®å· conf å’Œ html åˆ†åˆ«æŒ‡å‘äº†å®¿ä¸»æœºçš„ <code>/var/lib/docker/volumes/conf/_data</code>  ç›®å½•å’Œ <code>/var/lib/docker/volumes/html/_data</code>  ç›®å½•</li>\n</ul>\n<p>è¿™æ ·ä»¥æ¥ï¼Œå®¹å™¨å†…çš„ <code>conf</code>  å’Œ <code>html</code>  ç›®å½•å°± ä¸å®¿ä¸»æœºçš„ <code>conf</code>  å’Œ <code>html</code>  ç›®å½•å…³è”èµ·æ¥ï¼Œæˆ‘ä»¬ç§°ä¸º<strong>æŒ‚è½½</strong>ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬æ“ä½œå®¿ä¸»æœºçš„ <code>/var/lib/docker/volumes/html/_data</code>  å°±æ˜¯åœ¨æ“ä½œå®¹å™¨å†…çš„ <code>/usr/share/nginx/html/_data</code>  ç›®å½•ã€‚åªè¦æˆ‘ä»¬å°†é™æ€èµ„æºæ”¾å…¥å®¿ä¸»æœºå¯¹åº”ç›®å½•ï¼Œå°±å¯ä»¥è¢« Nginx ä»£ç†äº†ã€‚</p>\n<div class=\"note warning no-icon\">\n<p>ğŸ’¡<strong>å°æç¤º</strong>ï¼š</p>\n<p>â€‹\t <code>/var/lib/docker/volumes</code>  è¿™ä¸ªç›®å½•å°±æ˜¯é»˜è®¤çš„å­˜æ”¾æ‰€æœ‰å®¹å™¨æ•°æ®å·çš„ç›®å½•ï¼Œå…¶ä¸‹å†æ ¹æ®æ•°æ®å·åç§°åˆ›å»ºæ–°ç›®å½•ï¼Œæ ¼å¼ä¸º <code>/æ•°æ®å·å/_data</code> ã€‚</p>\n<p>â€‹\t<strong>ä¸ºä»€ä¹ˆä¸è®©å®¹å™¨ç›®å½•ç›´æ¥æŒ‡å‘å®¿ä¸»æœºç›®å½•å‘¢</strong>ï¼Ÿ</p>\n<ul>\n<li>å› ä¸ºç›´æ¥æŒ‡å‘å®¿ä¸»æœºç›®å½•å°±ä¸å®¿ä¸»æœºå¼ºè€¦åˆäº†ï¼Œå¦‚æœåˆ‡æ¢äº†ç¯å¢ƒï¼Œå®¿ä¸»æœºç›®å½•å°±å¯èƒ½å‘ç”Ÿæ”¹å˜äº†ã€‚ç”±äºå®¹å™¨ä¸€æ—¦åˆ›å»ºï¼Œç›®å½•æŒ‚è½½å°±æ— æ³•ä¿®æ”¹ï¼Œè¿™æ ·å®¹å™¨å°±æ— æ³•æ­£å¸¸å·¥ä½œäº†ã€‚</li>\n<li>ä½†æ˜¯å®¹å™¨æŒ‡å‘æ•°æ®å·ï¼Œä¸€ä¸ªé€»è¾‘åç§°ï¼Œè€Œæ•°æ®å·å†æŒ‡å‘å®¿ä¸»æœºç›®å½•ï¼Œå°±ä¸å­˜åœ¨å¼ºè€¦åˆã€‚å¦‚æœå®¿ä¸»æœºç›®å½•å‘ç”Ÿæ”¹å˜ï¼Œåªè¦æ”¹å˜æ•°æ®å·ä¸å®¿ä¸»æœºç›®å½•ä¹‹é—´çš„æ˜ å°„å…³ç³»å³å¯ã€‚</li>\n</ul>\n<p>ä¸è¿‡ï¼Œæˆ‘ä»¬é€šè¿‡ç”±äºæ•°æ®å·ç›®å½•æ¯”è¾ƒæ·±ï¼Œä¸å¥½å¯»æ‰¾ï¼Œé€šå¸¸æˆ‘ä»¬ä¹Ÿ<strong>å…è®¸è®©å®¹å™¨ç›´æ¥ä¸å®¿ä¸»æœºç›®å½•æŒ‚è½½è€Œä¸ä½¿ç”¨æ•°æ®å·</strong>ï¼Œå…·ä½“å‚è€ƒ 2.2.3 å°èŠ‚ã€‚</p>\n</div>\n<h4 id=\"æ•°æ®å·å‘½ä»¤\"><a class=\"anchor\" href=\"#æ•°æ®å·å‘½ä»¤\">#</a> æ•°æ®å·å‘½ä»¤</h4>\n<p>æ•°æ®å·çš„ç›¸å…³å‘½ä»¤æœ‰ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"><strong>å‘½ä»¤</strong></th>\n<th style=\"text-align:center\"><strong>è¯´æ˜</strong></th>\n<th style=\"text-align:center\"><strong>æ–‡æ¡£åœ°å€</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">docker volume create</td>\n<td style=\"text-align:center\">åˆ›å»ºæ•°æ®å·</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS92b2x1bWVfY3JlYXRlLw==\">docker volume create</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker volume ls</td>\n<td style=\"text-align:center\">æŸ¥çœ‹æ‰€æœ‰æ•°æ®å·</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS92b2x1bWVfbHMv\">docs.docker.com</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker volume rm</td>\n<td style=\"text-align:center\">åˆ é™¤æŒ‡å®šæ•°æ®å·</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS92b2x1bWVfcHJ1bmUv\">docs.docker.com</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker volume inspect</td>\n<td style=\"text-align:center\">æŸ¥çœ‹æŸä¸ªæ•°æ®å·çš„è¯¦æƒ…</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS92b2x1bWVfaW5zcGVjdC8=\">docs.docker.com</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker volume prune</td>\n<td style=\"text-align:center\">æ¸…é™¤æ•°æ®å·</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS92b2x1bWVfcHJ1bmUv\">docker volume prune</span></td>\n</tr>\n</tbody>\n</table>\n<p>æ³¨æ„ï¼šå®¹å™¨ä¸æ•°æ®å·çš„æŒ‚è½½è¦åœ¨åˆ›å»ºå®¹å™¨æ—¶é…ç½®ï¼Œå¯¹äºåˆ›å»ºå¥½çš„å®¹å™¨ï¼Œæ˜¯ä¸èƒ½è®¾ç½®æ•°æ®å·çš„ã€‚è€Œä¸”<strong>åˆ›å»ºå®¹å™¨çš„è¿‡ç¨‹ä¸­ï¼Œæ•°æ®å·ä¼šè‡ªåŠ¨åˆ›å»º</strong>ã€‚</p>\n<p>æ¼”ç¤ºä¸€ä¸‹ nginx çš„ html ç›®å½•æŒ‚è½½</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#ï¼ˆå¯é€‰ï¼‰åˆ é™¤å®¹å™¨å†…è‹¥æœ‰ nginx åˆ™è¦å…ˆåˆ é™¤ï¼Œå¦åˆ™ä¼šå†²çª</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>docker <span class=\"token function\">rm</span> <span class=\"token operator\">-</span>f nginx</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 1. é¦–å…ˆåˆ›å»ºå®¹å™¨å¹¶æŒ‡å®šæ•°æ®å·ï¼Œæ³¨æ„é€šè¿‡ -v å‚æ•°æ¥æŒ‡å®šæ•°æ®å·</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#åœ¨æ‰§è¡Œ docker run å‘½ä»¤æ—¶ï¼Œä½¿ç”¨ - v æ•°æ®å·ï¼šå®¹å™¨å†…ç›®å½•å¯å®Œæˆæ•°æ®å·æŒ‚è½½</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>docker run <span class=\"token operator\">-</span>d <span class=\"token operator\">--</span>name nginx <span class=\"token operator\">-</span>p 80:80 <span class=\"token operator\">-</span>v html:<span class=\"token operator\">/</span>usr/share/nginx/html nginx</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 2. ç„¶åæŸ¥çœ‹æ•°æ®å·</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>docker volume <span class=\"token function\">ls</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># ç»“æœ</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>DRIVER    VOLUME NAME</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>local     29524ff09715d3688eae3f99803a2796558dbd00ca584a25a4bbc193ca82459f</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>local     html</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># 3. æŸ¥çœ‹æ•°æ®å·è¯¦æƒ…</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>docker volume inspect html</pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># ç»“æœ</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token string\">\"CreatedAt\"</span>: <span class=\"token string\">\"2024-05-17T19:57:08+08:00\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token string\">\"Driver\"</span>: <span class=\"token string\">\"local\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token string\">\"Labels\"</span>: null<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token string\">\"Mountpoint\"</span>: <span class=\"token string\">\"/var/lib/docker/volumes/html/_data\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token string\">\"Name\"</span>: <span class=\"token string\">\"html\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token string\">\"Options\"</span>: null<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token string\">\"Scope\"</span>: <span class=\"token string\">\"local\"</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\"># 4. æŸ¥çœ‹ /var/lib/docker/volumes/html/_data ç›®å½•</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>ll <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>lib/docker/volumes/html/_data</pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\"># å¯ä»¥çœ‹åˆ°ä¸ nginx çš„ html ç›®å½•å†…å®¹ä¸€æ ·ï¼Œç»“æœå¦‚ä¸‹ï¼š</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>æ€»ç”¨é‡ 8</pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token operator\">-</span>rw-r-<span class=\"token operator\">-</span>r-<span class=\"token operator\">-</span><span class=\"token punctuation\">.</span> 1 root root 497 12æœˆ 28 2021 50x<span class=\"token punctuation\">.</span>html</pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token operator\">-</span>rw-r-<span class=\"token operator\">-</span>r-<span class=\"token operator\">-</span><span class=\"token punctuation\">.</span> 1 root root 615 12æœˆ 28 2021 index<span class=\"token punctuation\">.</span>html</pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\"># 5. è¿›å…¥è¯¥ç›®å½•ï¼Œå¹¶éšæ„ä¿®æ”¹ index.html å†…å®¹</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>cd <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>lib/docker/volumes/html/_data</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>vi index<span class=\"token punctuation\">.</span>html</pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token comment\"># 6. æ‰“å¼€é¡µé¢ï¼ŒæŸ¥çœ‹æ•ˆæœ</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token comment\"># 7. è¿›å…¥å®¹å™¨å†…éƒ¨ï¼ŒæŸ¥çœ‹ /usr/share/nginx/html ç›®å½•å†…çš„æ–‡ä»¶æ˜¯å¦å˜åŒ–</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>docker exec <span class=\"token operator\">-</span>it nginx bash</pre></td></tr></table></figure><p>MySQL ä¼šè‡ªåŠ¨æŒ‚è½½æ•°æ®å·ï¼šæ¼”ç¤ºä¸€ä¸‹ MySQL çš„åŒ¿åæ•°æ®å·</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 1. æŸ¥çœ‹ MySQL å®¹å™¨è¯¦ç»†ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>docker inspect mysql</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># å…³æ³¨å…¶ä¸­.Config.Volumes éƒ¨åˆ†å’Œ.Mounts éƒ¨åˆ†</span></pre></td></tr></table></figure><p>æˆ‘ä»¬å…³æ³¨ä¸¤éƒ¨åˆ†å†…å®¹ï¼Œç¬¬ä¸€æ˜¯ <code>.Config.Volumes</code>  éƒ¨åˆ†ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"Config\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">//... ç•¥</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token property\">\"Volumes\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token property\">\"/var/lib/mysql\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">//... ç•¥</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°è¿™ä¸ªå®¹å™¨å£°æ˜äº†ä¸€ä¸ªæœ¬åœ°ç›®å½•ï¼Œéœ€è¦æŒ‚è½½æ•°æ®å·ï¼Œä½†æ˜¯<strong>æ•°æ®å·æœªå®šä¹‰</strong>ã€‚è¿™å°±æ˜¯åŒ¿åå·ã€‚</p>\n<p>ç„¶åï¼Œæˆ‘ä»¬å†çœ‹ç»“æœä¸­çš„ <code>.Mounts</code>  éƒ¨åˆ†ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"Mounts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token property\">\"Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"volume\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token property\">\"Name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"29524ff09715d3688eae3f99803a2796558dbd00ca584a25a4bbc193ca82459f\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token property\">\"Source\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/var/lib/docker/volumes/29524ff09715d3688eae3f99803a2796558dbd00ca584a25a4bbc193ca82459f/_data\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token property\">\"Destination\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/var/lib/mysql\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token property\">\"Driver\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"local\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°ï¼Œå…¶ä¸­æœ‰å‡ ä¸ªå…³é”®å±æ€§ï¼š</p>\n<ul>\n<li>Nameï¼šæ•°æ®å·åç§°ã€‚ç”±äºå®šä¹‰å®¹å™¨æœªè®¾ç½®å®¹å™¨åï¼Œè¿™é‡Œçš„å°±æ˜¯åŒ¿åå·è‡ªåŠ¨ç”Ÿæˆçš„åå­—ï¼Œä¸€ä¸² hash å€¼ã€‚</li>\n<li>Sourceï¼šå®¿ä¸»æœºç›®å½•</li>\n<li>Destination : å®¹å™¨å†…çš„ç›®å½•</li>\n</ul>\n<p>ä¸Šè¿°é…ç½®æ˜¯å°†å®¹å™¨å†…çš„ <code>/var/lib/mysql</code>  è¿™ä¸ªç›®å½•ï¼Œä¸æ•°æ®å· <code>29524ff09715d3688eae3f99803a2796558dbd00ca584a25a4bbc193ca82459f</code>  æŒ‚è½½ã€‚äºæ˜¯åœ¨å®¿ä¸»æœºä¸­å°±æœ‰äº† <code>/var/lib/docker/volumes/29524ff09715d3688eae3f99803a2796558dbd00ca584a25a4bbc193ca82459f/_data</code>  è¿™ä¸ªç›®å½•ã€‚è¿™å°±æ˜¯åŒ¿åæ•°æ®å·å¯¹åº”çš„ç›®å½•ï¼Œå…¶ä½¿ç”¨æ–¹å¼ä¸æ™®é€šæ•°æ®å·æ²¡æœ‰å·®åˆ«ã€‚</p>\n<p>æ¥ä¸‹æ¥ï¼Œå¯ä»¥æŸ¥çœ‹è¯¥ç›®å½•ä¸‹çš„ MySQL çš„ data æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">ls</span> <span class=\"token parameter variable\">-l</span> /var/lib/docker/volumes/29524ff09715d3688eae3f99803a2796558dbd00ca584a25a4bbc193ca82459f/_data</pre></td></tr></table></figure><p>æ³¨æ„ï¼šæ¯ä¸€ä¸ªä¸åŒçš„é•œåƒï¼Œå°†æ¥åˆ›å»ºå®¹å™¨åå†…éƒ¨æœ‰å“ªäº›ç›®å½•å¯ä»¥æŒ‚è½½ï¼Œå¯ä»¥å‚è€ƒ DockerHub å¯¹åº”çš„é¡µé¢</p>\n<h4 id=\"æŒ‚è½½æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶\"><a class=\"anchor\" href=\"#æŒ‚è½½æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶\">#</a> æŒ‚è½½æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶</h4>\n<p>å¯ä»¥å‘ç°ï¼Œæ•°æ®å·çš„ç›®å½•ç»“æ„è¾ƒæ·±ï¼Œå¦‚æœæˆ‘ä»¬å»æ“ä½œæ•°æ®å·ç›®å½•ä¼šä¸å¤ªæ–¹ä¾¿ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šç›´æ¥å°†å®¹å™¨ç›®å½•ä¸å®¿ä¸»æœºæŒ‡å®šç›®å½•æŒ‚è½½ã€‚æŒ‚è½½è¯­æ³•ä¸æ•°æ®å·ç±»ä¼¼ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŒ‚è½½æœ¬åœ°ç›®å½•</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token parameter variable\">-v</span> æœ¬åœ°ç›®å½•:å®¹å™¨å†…ç›®å½•</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># æŒ‚è½½æœ¬åœ°æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token parameter variable\">-v</span> æœ¬åœ°æ–‡ä»¶:å®¹å™¨å†…æ–‡ä»¶</pre></td></tr></table></figure><div class=\"note warning\">\n<p><strong>æ³¨æ„</strong>ï¼šæœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶å¿…é¡»ä»¥  <code>/</code>  æˆ–  <code>./</code>  å¼€å¤´ï¼Œå¦‚æœç›´æ¥ä»¥åå­—å¼€å¤´ï¼Œä¼šè¢«è¯†åˆ«ä¸ºæ•°æ®å·åè€Œéæœ¬åœ°ç›®å½•åã€‚</p>\n</div>\n<p>ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token parameter variable\">-v</span> mysql:/var/lib/mysql <span class=\"token comment\"># ä¼šè¢«è¯†åˆ«ä¸ºä¸€ä¸ªæ•°æ®å·å« mysqlï¼Œè¿è¡Œæ—¶ä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªæ•°æ®å·</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token parameter variable\">-v</span> ./mysql:/var/lib/mysql <span class=\"token comment\"># ä¼šè¢«è¯†åˆ«ä¸ºå½“å‰ç›®å½•ä¸‹çš„ mysql ç›®å½•ï¼Œè¿è¡Œæ—¶å¦‚æœä¸å­˜åœ¨ä¼šåˆ›å»ºç›®å½•</span></pre></td></tr></table></figure><p>åˆ é™¤å¹¶é‡æ–°åˆ›å»º mysql å®¹å™¨ï¼Œå¹¶å®Œæˆæœ¬åœ°ç›®å½•æŒ‚è½½ï¼š</p>\n<ul>\n<li>æŒ‚è½½ <code>/root/mysql/data</code>  åˆ°å®¹å™¨å†…çš„ <code>/var/lib/mysql</code>  ç›®å½•</li>\n<li>æŒ‚è½½ <code>/root/mysql/init</code>  åˆ°å®¹å™¨å†…çš„ <code>/docker-entrypoint-initdb.d</code>  ç›®å½•ï¼ˆåˆå§‹åŒ–çš„ SQL è„šæœ¬ç›®å½•ï¼‰</li>\n<li>æŒ‚è½½ <code>/root/mysql/conf</code>  åˆ°å®¹å™¨å†…çš„ <code>/etc/mysql/conf.d</code>  ç›®å½•ï¼ˆè¿™ä¸ªæ˜¯ MySQL é…ç½®æ–‡ä»¶ç›®å½•ï¼‰</li>\n</ul>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#åˆ é™¤ mysql</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>docker <span class=\"token function\">rm</span> <span class=\"token operator\">-</span>f mysql</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#åˆ‡æ¢åˆ° /root ç›®å½•ä¸‹</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>cd ~</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#åœ¨ /root ç›®å½•ä¸‹åˆ›å»º mysql ç›®å½•</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>mkdir mysql</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">#åˆ‡æ¢åˆ° /root/mysql ç›®å½•ä¸‹</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>cd mysql/</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">#åˆ›å»ºç›¸åº”çš„ dataã€confã€init ç›®å½•</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>mkdir <span class=\"token keyword\">data</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>mkdir conf</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>mkdir init</pre></td></tr></table></figure><p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404090812748.png\" alt=\"\" /></p>\n<p>æ¥ä¸‹æ¥ï¼Œæœ¬åœ°ç›®å½•æŒ‚è½½ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 1. åˆ é™¤åŸæ¥çš„ MySQL å®¹å™¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token function\">rm</span> <span class=\"token parameter variable\">-f</span> mysql</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 2. è¿›å…¥ root ç›®å½•</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">cd</span> ~</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 3. åˆ›å»ºå¹¶è¿è¡Œæ–° mysql å®¹å™¨ï¼ŒæŒ‚è½½æœ¬åœ°ç›®å½•</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token parameter variable\">--name</span> mysql <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token parameter variable\">-p</span> <span class=\"token number\">3306</span>:3306 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">TZ</span><span class=\"token operator\">=</span>Asia/Shanghai <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">MYSQL_ROOT_PASSWORD</span><span class=\"token operator\">=</span><span class=\"token number\">123</span> <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token parameter variable\">-v</span> ./mysql/data:/var/lib/mysql <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token parameter variable\">-v</span> ./mysql/conf:/etc/mysql/conf.d <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token parameter variable\">-v</span> ./mysql/init:/docker-entrypoint-initdb.d <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  mysql</pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># 4. æŸ¥çœ‹ root ç›®å½•ï¼Œå¯ä»¥å‘ç°ï½/mysql/data ç›®å½•å·²ç»è‡ªåŠ¨åˆ›å»ºå¥½äº†</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token function\">ls</span> <span class=\"token parameter variable\">-l</span> mysql</pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># ç»“æœï¼š</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>æ€»ç”¨é‡ <span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>drwxr-xr-x. <span class=\"token number\">2</span> root    root   <span class=\"token number\">20</span> <span class=\"token number\">5</span>æœˆ  <span class=\"token number\">19</span> <span class=\"token number\">15</span>:11 conf</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>drwxr-xr-x. <span class=\"token number\">7</span> polkitd root <span class=\"token number\">4096</span> <span class=\"token number\">5</span>æœˆ  <span class=\"token number\">19</span> <span class=\"token number\">15</span>:11 data</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>drwxr-xr-x. <span class=\"token number\">2</span> root    root   <span class=\"token number\">23</span> <span class=\"token number\">5</span>æœˆ  <span class=\"token number\">19</span> <span class=\"token number\">15</span>:11 init</pre></td></tr></table></figure><p>è¿™æ ·å³ä½¿åˆ é™¤ mysql æˆ–è€…åšå‡çº§ï¼Œä¹Ÿä¸ä¼šä¸¢å¤±æ•°æ®ã€‚</p>\n<h3 id=\"é•œåƒ\"><a class=\"anchor\" href=\"#é•œåƒ\">#</a> é•œåƒ</h3>\n<p>å‰é¢æˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨åˆ«äººå‡†å¤‡å¥½çš„é•œåƒï¼Œé‚£å¦‚æœæˆ‘è¦éƒ¨ç½²ä¸€ä¸ª Java é¡¹ç›®ï¼ŒæŠŠå®ƒæ‰“åŒ…ä¸ºä¸€ä¸ªé•œåƒè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>\n<h4 id=\"é•œåƒç»“æ„\"><a class=\"anchor\" href=\"#é•œåƒç»“æ„\">#</a> é•œåƒç»“æ„</h4>\n<p>è¦æƒ³è‡ªå·±æ„å»ºé•œåƒï¼Œå¿…é¡»å…ˆäº†è§£é•œåƒçš„ç»“æ„ã€‚</p>\n<p>é•œåƒä¹‹æ‰€ä»¥èƒ½è®©æˆ‘ä»¬å¿«é€Ÿè·¨æ“ä½œç³»ç»Ÿéƒ¨ç½²åº”ç”¨è€Œå¿½ç•¥å…¶è¿è¡Œç¯å¢ƒã€é…ç½®ï¼Œå°±æ˜¯å› ä¸ºé•œåƒä¸­åŒ…å«äº†ç¨‹åºè¿è¡Œéœ€è¦çš„ç³»ç»Ÿå‡½æ•°åº“ã€ç¯å¢ƒã€é…ç½®ã€ä¾èµ–ã€‚</p>\n<p>å› æ­¤ï¼Œè‡ªå®šä¹‰é•œåƒæœ¬è´¨å°±æ˜¯ä¾æ¬¡å‡†å¤‡å¥½ç¨‹åºè¿è¡Œçš„åŸºç¡€ç¯å¢ƒã€ä¾èµ–ã€åº”ç”¨æœ¬èº«ã€è¿è¡Œé…ç½®ç­‰æ–‡ä»¶ï¼Œå¹¶ä¸”æ‰“åŒ…è€Œæˆã€‚</p>\n<p>ä¸¾ä¸ªæ —å­ï¼Œæˆ‘ä»¬è¦ä» 0 éƒ¨ç½²ä¸€ä¸ª Java åº”ç”¨ï¼Œå¤§æ¦‚æµç¨‹æ˜¯è¿™æ ·ï¼š</p>\n<ul>\n<li>å‡†å¤‡ä¸€ä¸ª linux æœåŠ¡ï¼ˆCentOS æˆ–è€… Ubuntu å‡å¯ï¼‰</li>\n<li>å®‰è£…å¹¶é…ç½® JDK</li>\n<li>ä¸Šä¼  Jar åŒ…</li>\n<li>è¿è¡Œ jar åŒ…</li>\n</ul>\n<p>é‚£å› æ­¤ï¼Œæˆ‘ä»¬æ‰“åŒ…é•œåƒä¹Ÿæ˜¯åˆ†æˆè¿™ä¹ˆå‡ æ­¥ï¼š</p>\n<ul>\n<li>å‡†å¤‡ Linux è¿è¡Œç¯å¢ƒï¼ˆjava é¡¹ç›®å¹¶ä¸éœ€è¦å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œä»…ä»…æ˜¯åŸºç¡€è¿è¡Œç¯å¢ƒå³å¯ï¼‰</li>\n<li>å®‰è£…å¹¶é…ç½® JDK</li>\n<li>æ‹·è´ jar åŒ…</li>\n<li>é…ç½®å¯åŠ¨è„šæœ¬</li>\n</ul>\n<p>ä¸Šè¿°æ­¥éª¤ä¸­çš„æ¯ä¸€æ¬¡æ“ä½œå…¶å®éƒ½æ˜¯åœ¨ç”Ÿäº§ä¸€äº›æ–‡ä»¶ï¼ˆç³»ç»Ÿè¿è¡Œç¯å¢ƒã€å‡½æ•°åº“ã€é…ç½®æœ€ç»ˆéƒ½æ˜¯ç£ç›˜æ–‡ä»¶ï¼‰ï¼Œæ‰€ä»¥<strong>é•œåƒå°±æ˜¯ä¸€å †æ–‡ä»¶çš„é›†åˆ</strong>ã€‚</p>\n<p>ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé•œåƒæ–‡ä»¶ä¸æ˜¯éšæ„å †æ”¾çš„ï¼Œè€Œæ˜¯æŒ‰ç…§æ“ä½œçš„æ­¥éª¤åˆ†å±‚å åŠ è€Œæˆï¼Œæ¯ä¸€å±‚å½¢æˆçš„æ–‡ä»¶éƒ½ä¼šå•ç‹¬æ‰“åŒ…å¹¶æ ‡è®°ä¸€ä¸ªå”¯ä¸€ idï¼Œç§°ä¸º<strong> Layer</strong>ï¼ˆ<strong>å±‚</strong>ï¼‰ã€‚è¿™æ ·ï¼Œå¦‚æœæˆ‘ä»¬æ„å»ºæ—¶ç”¨åˆ°çš„æŸäº›å±‚å…¶ä»–äººå·²ç»åˆ¶ä½œè¿‡ï¼Œå°±å¯ä»¥ç›´æ¥æ‹·è´ä½¿ç”¨è¿™äº›å±‚ï¼Œè€Œä¸ç”¨é‡å¤åˆ¶ä½œã€‚</p>\n<p>ä¾‹å¦‚ï¼Œç¬¬ä¸€æ­¥ä¸­éœ€è¦çš„ Linux è¿è¡Œç¯å¢ƒï¼Œé€šç”¨æ€§å°±å¾ˆå¼ºï¼Œæ‰€ä»¥ Docker å®˜æ–¹å°±åˆ¶ä½œäº†è¿™æ ·çš„åªåŒ…å« Linux è¿è¡Œç¯å¢ƒçš„é•œåƒã€‚æˆ‘ä»¬åœ¨åˆ¶ä½œ java é•œåƒæ—¶ï¼Œå°±æ— éœ€é‡å¤åˆ¶ä½œï¼Œç›´æ¥ä½¿ç”¨ Docker å®˜æ–¹æä¾›çš„ CentOS æˆ– Ubuntu é•œåƒä½œä¸ºåŸºç¡€é•œåƒã€‚ç„¶åå†æ­å»ºå…¶å®ƒå±‚å³å¯ï¼Œè¿™æ ·é€å±‚æ­å»ºï¼Œæœ€ç»ˆæ•´ä¸ª Java é¡¹ç›®çš„é•œåƒç»“æ„å¦‚å›¾æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404090843754.png\" alt=\"img\" /></p>\n<h4 id=\"dockerfile\"><a class=\"anchor\" href=\"#dockerfile\">#</a> Dockerfile</h4>\n<p>ç”±äºåˆ¶ä½œé•œåƒçš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦é€å±‚å¤„ç†å’Œæ‰“åŒ…ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥ Docker å°±æä¾›äº†è‡ªåŠ¨æ‰“åŒ…é•œåƒçš„åŠŸèƒ½ã€‚æˆ‘ä»¬åªéœ€è¦å°†æ‰“åŒ…çš„è¿‡ç¨‹ï¼Œæ¯ä¸€å±‚è¦åšçš„äº‹æƒ…ç”¨å›ºå®šçš„è¯­æ³•å†™ä¸‹æ¥ï¼Œäº¤ç»™ Docker å»æ‰§è¡Œå³å¯ã€‚</p>\n<p>è€Œè¿™ç§è®°å½•é•œåƒç»“æ„çš„æ–‡ä»¶å°±ç§°ä¸º<strong> Dockerfile</strong>ï¼Œå…¶å¯¹åº”çš„è¯­æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLw==\">https://docs.docker.com/engine/reference/builder/</span></p>\n<p>å…¶ä¸­çš„è¯­æ³•æ¯”è¾ƒå¤šï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æœ‰ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"><strong>æŒ‡ä»¤</strong></th>\n<th style=\"text-align:center\"><strong>è¯´æ˜</strong></th>\n<th style=\"text-align:center\"><strong>ç¤ºä¾‹</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><strong>FROM</strong></td>\n<td style=\"text-align:center\">æŒ‡å®šåŸºç¡€é•œåƒ</td>\n<td style=\"text-align:center\"><code>FROM centos:6</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><strong>ENV</strong></td>\n<td style=\"text-align:center\">è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå¯åœ¨åé¢æŒ‡ä»¤ä½¿ç”¨</td>\n<td style=\"text-align:center\"><code>ENV key value</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><strong>COPY</strong></td>\n<td style=\"text-align:center\">æ‹·è´æœ¬åœ°æ–‡ä»¶åˆ°é•œåƒçš„æŒ‡å®šç›®å½•</td>\n<td style=\"text-align:center\"><code>COPY ./xx.jar /tmp/app.jar</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><strong>RUN</strong></td>\n<td style=\"text-align:center\">æ‰§è¡Œ Linux çš„ shell å‘½ä»¤ï¼Œä¸€èˆ¬æ˜¯å®‰è£…è¿‡ç¨‹çš„å‘½ä»¤</td>\n<td style=\"text-align:center\"><code>RUN yum install gcc</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><strong>EXPOSE</strong></td>\n<td style=\"text-align:center\">æŒ‡å®šå®¹å™¨è¿è¡Œæ—¶ç›‘å¬çš„ç«¯å£ï¼Œæ˜¯ç»™é•œåƒä½¿ç”¨è€…çœ‹çš„</td>\n<td style=\"text-align:center\">EXPOSE 8080</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><strong>ENTRYPOINT</strong></td>\n<td style=\"text-align:center\">é•œåƒä¸­åº”ç”¨çš„å¯åŠ¨å‘½ä»¤ï¼Œå®¹å™¨è¿è¡Œæ—¶è°ƒç”¨</td>\n<td style=\"text-align:center\">ENTRYPOINT java -jar xx.jar</td>\n</tr>\n</tbody>\n</table>\n<p>ä¾‹å¦‚ï¼Œè¦åŸºäº Ubuntu é•œåƒæ¥æ„å»ºä¸€ä¸ª Java åº”ç”¨ï¼Œå…¶ Dockerfile å†…å®¹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight dockerfile\"><figcaption data-lang=\"Docker\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŒ‡å®šåŸºç¡€é•œåƒ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> ubuntu:16.04</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># é…ç½®ç¯å¢ƒå˜é‡ï¼ŒJDK çš„å®‰è£…ç›®å½•ã€å®¹å™¨å†…æ—¶åŒº</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> JAVA_DIR=/usr/local</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> TZ=Asia/Shanghai</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># æ‹·è´ jdk å’Œ java é¡¹ç›®çš„åŒ…</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">COPY</span> ./jdk8.tar.gz <span class=\"token variable\">$JAVA_DIR</span>/</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">COPY</span> ./docker-demo.jar /tmp/app.jar</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># è®¾å®šæ—¶åŒº</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">RUN</span> ln -snf /usr/share/zoneinfo/<span class=\"token variable\">$TZ</span> /etc/localtime &amp;&amp; echo <span class=\"token variable\">$TZ</span> > /etc/timezone</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># å®‰è£… JDK</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">RUN</span> cd <span class=\"token variable\">$JAVA_DIR</span> <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre> &amp;&amp; tar -xf ./jdk8.tar.gz <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre> &amp;&amp; mv ./jdk1.8.0_144 ./java8</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># é…ç½®ç¯å¢ƒå˜é‡</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> JAVA_HOME=<span class=\"token variable\">$JAVA_DIR</span>/java8</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> PATH=<span class=\"token variable\">$PATH</span>:<span class=\"token variable\">$JAVA_HOME</span>/bin</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># æŒ‡å®šé¡¹ç›®ç›‘å¬çš„ç«¯å£</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">EXPOSE</span> 8080</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># å…¥å£ï¼Œjava é¡¹ç›®çš„å¯åŠ¨å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENTRYPOINT</span> [<span class=\"token string\">\"java\"</span>, <span class=\"token string\">\"-jar\"</span>, <span class=\"token string\">\"/app.jar\"</span>]</span></pre></td></tr></table></figure><div class=\"note primary\">\n<p>æ€è€ƒä¸€ä¸‹ï¼šä»¥åæˆ‘ä»¬ä¼šæœ‰å¾ˆå¤šå¾ˆå¤š java é¡¹ç›®éœ€è¦æ‰“åŒ…ä¸ºé•œåƒï¼Œä»–ä»¬éƒ½éœ€è¦ Linux ç³»ç»Ÿç¯å¢ƒã€JDK ç¯å¢ƒè¿™ä¸¤å±‚ï¼Œåªæœ‰ä¸Šé¢çš„ 3 å±‚ä¸åŒï¼ˆå› ä¸º jar åŒ…ä¸åŒï¼‰ã€‚å¦‚æœæ¯æ¬¡åˆ¶ä½œ java é•œåƒéƒ½é‡å¤åˆ¶ä½œå‰ä¸¤å±‚é•œåƒï¼Œæ˜¯ä¸æ˜¯å¾ˆéº»çƒ¦ã€‚</p>\n</div>\n<p>æ‰€ä»¥ï¼Œå°±æœ‰äººæä¾›äº†åŸºç¡€çš„ç³»ç»ŸåŠ  JDK ç¯å¢ƒï¼Œæˆ‘ä»¬åœ¨æ­¤åŸºç¡€ä¸Šåˆ¶ä½œ java é•œåƒï¼Œå°±å¯ä»¥çœå» JDK çš„é…ç½®äº†ï¼š</p>\n<figure class=\"highlight dockerfile\"><figcaption data-lang=\"Docker\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># åŸºç¡€é•œåƒ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> openjdk:11.0-jre-buster</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># è®¾å®šæ—¶åŒº</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> TZ=Asia/Shanghai</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">RUN</span> ln -snf /usr/share/zoneinfo/<span class=\"token variable\">$TZ</span> /etc/localtime &amp;&amp; echo <span class=\"token variable\">$TZ</span> > /etc/timezone</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># æ‹·è´ jar åŒ…</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">COPY</span> docker-demo.jar /app.jar</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># å…¥å£</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENTRYPOINT</span> [<span class=\"token string\">\"java\"</span>, <span class=\"token string\">\"-jar\"</span>, <span class=\"token string\">\"/app.jar\"</span>]</span></pre></td></tr></table></figure><p>æ˜¯ä¸æ˜¯ç®€å•å¤šäº†ã€‚</p>\n<h4 id=\"æ„å»ºé•œåƒ\"><a class=\"anchor\" href=\"#æ„å»ºé•œåƒ\">#</a> æ„å»ºé•œåƒ</h4>\n<p>å½“ Dockerfile æ–‡ä»¶å†™å¥½ä»¥åï¼Œå°±å¯ä»¥åˆ©ç”¨å‘½ä»¤æ¥æ„å»ºé•œåƒäº†ã€‚</p>\n<p>æˆ‘ä»¬å‡†å¤‡å¥½ä¸€ä¸ª demo é¡¹ç›®åŠå¯¹åº”çš„ Dockerfileï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404090851642.png\" alt=\"img\" /></p>\n<p>Dockerfile ä¸­çš„æ ·å­ï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404090859210.png\" alt=\"image-20240409085911148\" /></p>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬å°† <code>docker-demo.jar</code>  åŒ…ä»¥åŠ <code>Dockerfile</code>  æ‹·è´åˆ°è™šæ‹Ÿæœºçš„ <code>/root/demo</code>  ç›®å½•ï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404090856731.png\" alt=\"img\" /></p>\n<p>ç„¶åï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œæ„å»ºé•œåƒï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># è¿›å…¥é•œåƒç›®å½•</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /root/demo</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># å¼€å§‹æ„å»º</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">docker</span> build <span class=\"token parameter variable\">-t</span> docker-demo:1.0 <span class=\"token builtin class-name\">.</span></pre></td></tr></table></figure><p>å‘½ä»¤è¯´æ˜ï¼š</p>\n<ul>\n<li><code>docker build </code> : å°±æ˜¯æ„å»ºä¸€ä¸ª docker é•œåƒ</li>\n<li><code>-t docker-demo:1.0</code>  ï¼š <code>-t</code>  å‚æ•°æ˜¯æŒ‡å®šé•œåƒçš„åç§°ï¼ˆ <code>repository</code>  å’Œ <code>tag</code> ï¼‰</li>\n<li><code>.</code>  : æœ€åçš„ç‚¹æ˜¯æŒ‡æ„å»ºæ—¶ Dockerfile æ‰€åœ¨è·¯å¾„ï¼Œç”±äºæˆ‘ä»¬è¿›å…¥äº† demo ç›®å½•ï¼Œæ‰€ä»¥æŒ‡å®šçš„æ˜¯ <code>.</code>  ä»£è¡¨å½“å‰ç›®å½•ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å®š Dockerfile ç›®å½•ï¼š\n<ul>\n<li>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ç›´æ¥æŒ‡å®š Dockerfile ç›®å½•</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> build <span class=\"token parameter variable\">-t</span> docker-demo:1.0 /root/demo</pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<p>ç»“æœï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404090905035.png\" alt=\"image-20240409090510979\" /></p>\n<p>æŸ¥çœ‹é•œåƒåˆ—è¡¨ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹é•œåƒåˆ—è¡¨ï¼š</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> images</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># ç»“æœ</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>REPOSITORY    TAG       IMAGE ID       CREATED          SIZE</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>docker-demo   <span class=\"token number\">1.0</span>       d6ab0b9e64b9   <span class=\"token number\">27</span> minutes ago   327MB</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>nginx         latest    605c77e624dd   <span class=\"token number\">16</span> months ago    141MB</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>mysql         latest    3218b38490ce   <span class=\"token number\">17</span> months ago    516MB</pre></td></tr></table></figure><p>ç„¶åå°è¯•è¿è¡Œè¯¥é•œåƒï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 1. åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--name</span> <span class=\"token function\">dd</span> <span class=\"token parameter variable\">-p</span> <span class=\"token number\">8080</span>:8080 docker-demo:1.0</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 2. æŸ¥çœ‹å®¹å™¨</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>dps</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># ç»“æœ</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>CONTAINER ID   IMAGE             PORTS                                                  STATUS         NAMES</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>78a000447b49   docker-demo:1.0   <span class=\"token number\">0.0</span>.0.0:8080-<span class=\"token operator\">></span><span class=\"token number\">8080</span>/tcp, :::8090-<span class=\"token operator\">></span><span class=\"token number\">8090</span>/tcp              Up <span class=\"token number\">2</span> seconds   <span class=\"token function\">dd</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>f63cfead8502   mysql             <span class=\"token number\">0.0</span>.0.0:3306-<span class=\"token operator\">></span><span class=\"token number\">3306</span>/tcp, :::3306-<span class=\"token operator\">></span><span class=\"token number\">3306</span>/tcp, <span class=\"token number\">33060</span>/tcp   Up <span class=\"token number\">2</span> hours     mysql</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 3. è®¿é—®</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">curl</span> localhost:8080/hello/count</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># ç»“æœï¼š</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token operator\">&lt;</span>h<span class=\"token operator\"><span class=\"token file-descriptor important\">5</span>></span>æ¬¢è¿è®¿é—®é»‘é©¬å•†åŸ, è¿™æ˜¯æ‚¨ç¬¬1æ¬¡è®¿é—®<span class=\"token operator\">&lt;</span>h<span class=\"token operator\"><span class=\"token file-descriptor important\">5</span>></span></pre></td></tr></table></figure><h3 id=\"ç½‘ç»œ\"><a class=\"anchor\" href=\"#ç½‘ç»œ\">#</a> ç½‘ç»œ</h3>\n<p>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Java é¡¹ç›®çš„å®¹å™¨ï¼Œè€Œ Java é¡¹ç›®å¾€å¾€éœ€è¦è®¿é—®å…¶å®ƒå„ç§ä¸­é—´ä»¶ï¼Œä¾‹å¦‚ MySQLã€Redis ç­‰ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬çš„å®¹å™¨ä¹‹é—´èƒ½å¦äº’ç›¸è®¿é—®å‘¢ï¼Ÿæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹</p>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸‹ MySQL å®¹å™¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œé‡ç‚¹å…³æ³¨å…¶ä¸­çš„ç½‘ç»œ IP åœ°å€ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 1. ç”¨åŸºæœ¬å‘½ä»¤ï¼Œå¯»æ‰¾ Networks.bridge.IPAddress å±æ€§</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> inspect mysql</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># ä¹Ÿå¯ä»¥ä½¿ç”¨ format è¿‡æ»¤ç»“æœ</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span>--swigï¿¼6--<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># å¾—åˆ° IP åœ°å€å¦‚ä¸‹ï¼š</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token number\">172.17</span>.0.2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 2. ç„¶åé€šè¿‡å‘½ä»¤è¿›å…¥ dd å®¹å™¨</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> <span class=\"token function\">dd</span> <span class=\"token function\">bash</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># 3. åœ¨å®¹å™¨å†…ï¼Œé€šè¿‡ ping å‘½ä»¤æµ‹è¯•ç½‘ç»œ</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token function\">ping</span> <span class=\"token number\">172.17</span>.0.2</pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># ç»“æœ</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>PING <span class=\"token number\">172.17</span>.0.2 <span class=\"token punctuation\">(</span><span class=\"token number\">172.17</span>.0.2<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token number\">64</span> bytes from <span class=\"token number\">172.17</span>.0.2: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.053</span> ms</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token number\">64</span> bytes from <span class=\"token number\">172.17</span>.0.2: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.059</span> ms</pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token number\">64</span> bytes from <span class=\"token number\">172.17</span>.0.2: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.058</span> ms</pre></td></tr></table></figure><p>å‘ç°å¯ä»¥äº’è”ï¼Œæ²¡æœ‰é—®é¢˜ã€‚</p>\n<p>ä½†æ˜¯ï¼Œå®¹å™¨çš„ç½‘ç»œ IP å…¶å®æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ IPï¼Œå…¶å€¼å¹¶ä¸å›ºå®šä¸æŸä¸€ä¸ªå®¹å™¨ç»‘å®šï¼Œå¦‚æœæˆ‘ä»¬åœ¨å¼€å‘æ—¶å†™æ­»æŸä¸ª IPï¼Œè€Œåœ¨éƒ¨ç½²æ—¶å¾ˆå¯èƒ½ MySQL å®¹å™¨å› ä¸ºå¯åŠ¨æ¬¡åºçš„å˜åŒ–å¯¼è‡´å…¶ IP å‘ç”Ÿå˜åŒ–ï¼Œè¿æ¥ä¼šå¤±è´¥ã€‚</p>\n<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»å€ŸåŠ©äº docker çš„ç½‘ç»œåŠŸèƒ½æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®˜æ–¹æ–‡æ¡£ï¼š</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9uZXR3b3JrLw==\">https://docs.docker.com/engine/reference/commandline/network/</span></p>\n<p>å¸¸è§å‘½ä»¤æœ‰ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"><strong>å‘½ä»¤</strong></th>\n<th style=\"text-align:center\"><strong>è¯´æ˜</strong></th>\n<th style=\"text-align:center\"><strong>æ–‡æ¡£åœ°å€</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">docker network create</td>\n<td style=\"text-align:center\">åˆ›å»ºä¸€ä¸ªç½‘ç»œ</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9uZXR3b3JrX2NyZWF0ZS8=\">docker network create</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker network ls</td>\n<td style=\"text-align:center\">æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œ</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9uZXR3b3JrX2xzLw==\">docs.docker.com</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker network rm</td>\n<td style=\"text-align:center\">åˆ é™¤æŒ‡å®šç½‘ç»œ</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9uZXR3b3JrX3JtLw==\">docs.docker.com</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker network prune</td>\n<td style=\"text-align:center\">æ¸…é™¤æœªä½¿ç”¨çš„ç½‘ç»œ</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9uZXR3b3JrX3BydW5lLw==\">docs.docker.com</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker network connect</td>\n<td style=\"text-align:center\">ä½¿æŒ‡å®šå®¹å™¨è¿æ¥åŠ å…¥æŸç½‘ç»œ</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9uZXR3b3JrX2Nvbm5lY3Qv\">docs.docker.com</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker network disconnect</td>\n<td style=\"text-align:center\">ä½¿æŒ‡å®šå®¹å™¨è¿æ¥ç¦»å¼€æŸç½‘ç»œ</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9uZXR3b3JrX2Rpc2Nvbm5lY3Qv\">docker network disconnect</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">docker network inspect</td>\n<td style=\"text-align:center\">æŸ¥çœ‹ç½‘ç»œè¯¦ç»†ä¿¡æ¯</td>\n<td style=\"text-align:center\"><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9uZXR3b3JrX2luc3BlY3Qv\">docker network inspect</span></td>\n</tr>\n</tbody>\n</table>\n<p>å­¦ä¹ ä½¿ç”¨ â€œè‡ªå®šä¹‰ç½‘ç»œ â€œ</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 1. é¦–å…ˆé€šè¿‡å‘½ä»¤åˆ›å»ºä¸€ä¸ªç½‘ç»œ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> network create hmall</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 2. ç„¶åæŸ¥çœ‹ç½‘ç»œ</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">docker</span> network <span class=\"token function\">ls</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># ç»“æœï¼š</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>NETWORK ID     NAME      DRIVER    SCOPE</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>639bc44d0a87   bridge    bridge    <span class=\"token builtin class-name\">local</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>403f16ec62a2   hmall     bridge    <span class=\"token builtin class-name\">local</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>0dc0f72a0fbb   <span class=\"token function\">host</span>      <span class=\"token function\">host</span>      <span class=\"token builtin class-name\">local</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>cd8d3e8df47b   none      null      <span class=\"token builtin class-name\">local</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># å…¶ä¸­ï¼Œé™¤äº† hmall ä»¥å¤–ï¼Œå…¶å®ƒéƒ½æ˜¯é»˜è®¤çš„ç½‘ç»œ</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># 3. è®© dd å’Œ mysql éƒ½åŠ å…¥è¯¥ç½‘ç»œï¼Œæ³¨æ„ï¼Œåœ¨åŠ å…¥ç½‘ç»œæ—¶å¯ä»¥é€šè¿‡ --alias ç»™å®¹å™¨èµ·åˆ«å</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># è¿™æ ·è¯¥ç½‘ç»œå†…çš„å…¶å®ƒå®¹å™¨å¯ä»¥ç”¨åˆ«åäº’ç›¸è®¿é—®ï¼</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># 3.1.mysql å®¹å™¨ï¼ŒæŒ‡å®šåˆ«åä¸º dbï¼Œå¦å¤–æ¯ä¸€ä¸ªå®¹å™¨éƒ½æœ‰ä¸€ä¸ªåˆ«åæ˜¯å®¹å™¨å</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token function\">docker</span> network connect hmall mysql <span class=\"token parameter variable\">--alias</span> db</pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># 3.2.db å®¹å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ java é¡¹ç›®</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token function\">docker</span> network connect hmall <span class=\"token function\">dd</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># 4. è¿›å…¥ dd å®¹å™¨ï¼Œå°è¯•åˆ©ç”¨åˆ«åè®¿é—® db</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># 4.1. è¿›å…¥å®¹å™¨</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> <span class=\"token function\">dd</span> <span class=\"token function\">bash</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\"># 4.2. ç”¨ db åˆ«åè®¿é—®</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token function\">ping</span> db</pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># ç»“æœ</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>PING db <span class=\"token punctuation\">(</span><span class=\"token number\">172.18</span>.0.2<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.</pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token number\">64</span> bytes from mysql.hmall <span class=\"token punctuation\">(</span><span class=\"token number\">172.18</span>.0.2<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.070</span> ms</pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token number\">64</span> bytes from mysql.hmall <span class=\"token punctuation\">(</span><span class=\"token number\">172.18</span>.0.2<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.056</span> ms</pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\"># 4.3. ç”¨å®¹å™¨åè®¿é—®</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token function\">ping</span> mysql</pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\"># ç»“æœï¼š</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>PING mysql <span class=\"token punctuation\">(</span><span class=\"token number\">172.18</span>.0.2<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.</pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token number\">64</span> bytes from mysql.hmall <span class=\"token punctuation\">(</span><span class=\"token number\">172.18</span>.0.2<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.044</span> ms</pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token number\">64</span> bytes from mysql.hmall <span class=\"token punctuation\">(</span><span class=\"token number\">172.18</span>.0.2<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.054</span> ms</pre></td></tr></table></figure><p>OKï¼Œç°åœ¨æ— éœ€è®°ä½ IP åœ°å€ä¹Ÿå¯ä»¥å®ç°å®¹å™¨äº’è”äº†ã€‚</p>\n<p><strong>æ€»ç»“</strong>ï¼š</p>\n<ul>\n<li>åœ¨è‡ªå®šä¹‰ç½‘ç»œä¸­ï¼Œå¯ä»¥ç»™å®¹å™¨èµ·å¤šä¸ªåˆ«åï¼Œé»˜è®¤çš„åˆ«åæ˜¯å®¹å™¨åæœ¬èº«</li>\n<li>åŠ å…¥è‡ªå®šä¹‰ç½‘ç»œçš„å®¹å™¨æ‰å¯ä»¥é€šè¿‡å®¹å™¨åäº’ç›¸è®¿é—®</li>\n</ul>\n",
            "tags": [
                "ç¬”è®°",
                "åç«¯,Docker"
            ]
        },
        {
            "id": "https://ruler64.github.io/hexo/Docker%E5%AE%89%E8%A3%85/",
            "url": "https://ruler64.github.io/hexo/Docker%E5%AE%89%E8%A3%85/",
            "title": "Dockerçš„å®‰è£…",
            "date_published": "2024-04-07T00:32:44.000Z",
            "content_html": "<div class=\"note info\">\n<p>Docker çš„å®‰è£…åœ¨ Linux CentOS 7 ä¸­ä¸ºä¾‹</p>\n</div>\n<h1 id=\"å¸è½½æ—§ç‰ˆ\"><a class=\"anchor\" href=\"#å¸è½½æ—§ç‰ˆ\">#</a> å¸è½½æ—§ç‰ˆ</h1>\n<p>é¦–å…ˆå¦‚æœç³»ç»Ÿä¸­å·²ç»å­˜åœ¨æ—§çš„ Dockerï¼Œåˆ™å…ˆå¸è½½ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum remove <span class=\"token function\">docker</span> <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    docker-client <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    docker-client-latest <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    docker-common <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    docker-latest <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    docker-latest-logrotate <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    docker-logrotate <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    docker-engine</pre></td></tr></table></figure><h1 id=\"é…ç½®dockerçš„yumåº“\"><a class=\"anchor\" href=\"#é…ç½®dockerçš„yumåº“\">#</a> é…ç½® Docker çš„ yum åº“</h1>\n<p>é¦–å…ˆè¦å®‰è£…ä¸€ä¸ª yum å·¥å…·</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> yum-utils</pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œé…ç½® Docker çš„ yum æºï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#æ·»åŠ è½¯ä»¶æºä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">sudo</span> yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">sed</span> <span class=\"token parameter variable\">-i</span> <span class=\"token string\">'s+download.docker.com+mirrors.aliyun.com/docker-ce+'</span> /etc/yum.repos.d/docker-ce.repo</pre></td></tr></table></figure><h1 id=\"å®‰è£…docker\"><a class=\"anchor\" href=\"#å®‰è£…docker\">#</a> å®‰è£… Docker</h1>\n<p>æœ€åï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œå®‰è£… Docker</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</pre></td></tr></table></figure><h1 id=\"å¯åŠ¨å’Œæ ¡éªŒ\"><a class=\"anchor\" href=\"#å¯åŠ¨å’Œæ ¡éªŒ\">#</a> å¯åŠ¨å’Œæ ¡éªŒ</h1>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å¯åŠ¨ Docker</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>systemctl start <span class=\"token function\">docker</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># åœæ­¢ Docker</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>systemctl stop <span class=\"token function\">docker</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># é‡å¯</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>systemctl restart <span class=\"token function\">docker</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># è®¾ç½®å¼€æœºè‡ªå¯</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>systemctl <span class=\"token builtin class-name\">enable</span> <span class=\"token function\">docker</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># æ‰§è¡Œ docker ps å‘½ä»¤ï¼Œå¦‚æœä¸æŠ¥é”™ï¼Œè¯´æ˜å®‰è£…å¯åŠ¨æˆåŠŸ</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token function\">ps</span></pre></td></tr></table></figure><h1 id=\"é…ç½®é•œåƒåŠ é€Ÿ\"><a class=\"anchor\" href=\"#é…ç½®é•œåƒåŠ é€Ÿ\">#</a> é…ç½®é•œåƒåŠ é€Ÿ</h1>\n<p>è¿™é‡Œä»¥é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿä¸ºä¾‹ã€‚</p>\n<h2 id=\"æ³¨å†Œé˜¿é‡Œäº‘è´¦å·\"><a class=\"anchor\" href=\"#æ³¨å†Œé˜¿é‡Œäº‘è´¦å·\">#</a> æ³¨å†Œé˜¿é‡Œäº‘è´¦å·</h2>\n<p>é¦–å…ˆè®¿é—®é˜¿é‡Œäº‘ç½‘ç«™:</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYWxpeXVuLmNvbS8=\">https://www.aliyun.com/</span></p>\n<p>æ³¨å†Œä¸€ä¸ªè´¦å·ã€‚</p>\n<h2 id=\"å¼€é€šé•œåƒæœåŠ¡\"><a class=\"anchor\" href=\"#å¼€é€šé•œåƒæœåŠ¡\">#</a> å¼€é€šé•œåƒæœåŠ¡</h2>\n<p>åœ¨é¦–é¡µçš„äº§å“ä¸­ï¼Œæ‰¾åˆ°é˜¿é‡Œäº‘çš„<strong>å®¹å™¨é•œåƒæœåŠ¡</strong>:</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404070844103.png\" alt=\"\" /></p>\n<p>ç‚¹å‡»åè¿›å…¥æ§åˆ¶å°ï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404070845936.png\" alt=\"\" /></p>\n<p>é¦–æ¬¡å¯èƒ½éœ€è¦é€‰æ‹©ç«‹åˆ»å¼€é€šï¼Œç„¶åè¿›å…¥æ§åˆ¶å°ã€‚</p>\n<h2 id=\"é…ç½®é•œåƒåŠ é€Ÿ-2\"><a class=\"anchor\" href=\"#é…ç½®é•œåƒåŠ é€Ÿ-2\">#</a> é…ç½®é•œåƒåŠ é€Ÿ</h2>\n<p>æ‰¾åˆ°<strong>é•œåƒå·¥å…·</strong>ä¸‹çš„<strong>é•œåƒåŠ é€Ÿå™¨</strong>ï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404070847709.png\" alt=\"\" /></p>\n<p>é¡µé¢å‘ä¸‹æ»šåŠ¨ï¼Œå³å¯æ‰¾åˆ°é…ç½®çš„æ–‡æ¡£è¯´æ˜ï¼š</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404070848134.png\" alt=\"\" /></p>\n<p>å…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºç›®å½•</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> /etc/docker</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># å¤åˆ¶å†…å®¹ï¼Œæ³¨æ„æŠŠå…¶ä¸­çš„é•œåƒåŠ é€Ÿåœ°å€æ”¹æˆä½ è‡ªå·±çš„</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">tee</span> /etc/docker/daemon.json <span class=\"token operator\">&lt;&lt;-</span><span class=\"token string\">'EOF'</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>&#123;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  \"registry-mirrors\": [\"https://xxxx.mirror.aliyuncs.com\"]</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>&#125;</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>EOF</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># é‡æ–°åŠ è½½é…ç½®</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>systemctl daemon-reload</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># é‡å¯ Docker</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>systemctl restart <span class=\"token function\">docker</span></pre></td></tr></table></figure><h1 id=\"dockeråŸç†\"><a class=\"anchor\" href=\"#dockeråŸç†\">#</a> Docker åŸç†</h1>\n<p><span class=\"red\">é•œåƒå’Œå®¹å™¨</span></p>\n<p>å½“æˆ‘ä»¬åˆ©ç”¨ Docker å®‰è£…åº”ç”¨æ—¶ï¼ŒDocker ä¼šè‡ªåŠ¨æœç´¢å¹¶ä¸‹è½½åº”ç”¨<strong>é•œåƒï¼ˆimageï¼‰</strong>ã€‚é•œåƒä¸ä»…åŒ…å«åº”ç”¨æœ¬èº«ï¼Œè¿˜åŒ…å«åº”ç”¨è¿è¡Œæ‰€éœ€è¦çš„ç¯å¢ƒã€é…ç½®ã€ç³»ç»Ÿå‡½æ•°åº“ã€‚Docker ä¼šåœ¨è¿è¡Œé•œåƒæ—¶åˆ›å»ºä¸€ä¸ªéš”ç¦»ç¯å¢ƒï¼Œç§°ä¸º<strong>å®¹å™¨ï¼ˆcontainerï¼‰</strong>ã€‚</p>\n<p><strong>é•œåƒä»“åº“</strong>ï¼šå­˜å‚¨å’Œç®¡ç†é•œåƒçš„å¹³å°ï¼ŒDocker å®˜æ–¹ç»´æŠ¤äº†ä¸€ä¸ªå…¬å…±ä»“åº“ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS8=\">Docker Hub</span>ã€‚</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/ruler64/picture/picture/202404070932177.png\" alt=\"\" /></p>\n",
            "tags": [
                "ç¬”è®°",
                "åç«¯,Docker"
            ]
        },
        {
            "id": "https://ruler64.github.io/hexo/SpringBoot-MybatisPlus-page/",
            "url": "https://ruler64.github.io/hexo/SpringBoot-MybatisPlus-page/",
            "title": "MybatisPlusä¹‹åˆ†é¡µæŸ¥è¯¢",
            "date_published": "2022-10-18T07:53:53.000Z",
            "content_html": "<p>ä»£ç åŸºäº maven ç®¡ç†å’Œ mysql æ•°æ®åº“ä¸ SpringBoot æ¡†æ¶</p>\n<ol>\n<li>\n<p>é¦–å…ˆåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º config ç›®å½•ä½œä¸º SpringBoot é…ç½®çš„ç›®å½•ï¼Œæ–°å»º class ç±» MybatisPlusConfigï¼Œä»£ç å¦‚ä¸‹</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Configuration</span><span class=\"token comment\">// ä½¿å…¶å¯ä»¥è¢«å‘ç°</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MybatisPlusConfig</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span><span class=\"token comment\">// äº¤ç»™ spring ç®¡ç†</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MybatisPlusInterceptor</span> <span class=\"token function\">mybatisPlusInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">MybatisPlusInterceptor</span> mybatisPlusInterceptor<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MybatisPlusInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        mybatisPlusInterceptor<span class=\"token punctuation\">.</span><span class=\"token function\">addInnerInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">PaginationInnerInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">return</span> mybatisPlusInterceptor<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>åŒç†åˆ›å»º controller ç›®å½•ï¼Œæ–°å»ºç±»åä¸º EmployeeControllerï¼Œä»£ç å¦‚ä¸‹</p>\n</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * å‘˜å·¥ä¿¡æ¯åˆ†é¡µæŸ¥è¯¢</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * @param page</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     * @param pageSize</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * @param name</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/page\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">R</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Page</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">page</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> page<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> pageSize<span class=\"token punctuation\">,</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token comment\">// æ„é€ åˆ†é¡µæ„é€ å™¨</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">Page</span> pageInfo<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Page</span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">,</span>pageSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token comment\">// æ„é€ æ¡ä»¶æ„é€ å™¨</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">LambdaQueryWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Employee</span><span class=\"token punctuation\">></span></span> queryWrapper<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">LambdaQueryWrapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token comment\">// æ·»åŠ è¿‡æ»¤æ¡ä»¶</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        queryWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">like</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotEmpty</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Employee</span><span class=\"token operator\">::</span><span class=\"token function\">getName</span><span class=\"token punctuation\">,</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token comment\">// æ·»åŠ æ’åºæ¡ä»¶</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        queryWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">orderByDesc</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Employee</span><span class=\"token operator\">::</span><span class=\"token function\">getUpdateTime</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token comment\">// æ‰§è¡ŒæŸ¥è¯¢</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        employeeService<span class=\"token punctuation\">.</span><span class=\"token function\">page</span><span class=\"token punctuation\">(</span>pageInfo<span class=\"token punctuation\">,</span>queryWrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">success</span><span class=\"token punctuation\">(</span>pageInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸­ <code>R</code>  ç±»å‹æ˜¯å“åº”å‰ç«¯çš„è¿›ä¸€æ­¥å°è£…ç±»ï¼ŒåŸºç¡€ç±»åä¸º <code>Employee</code>  å…¶å„è‡ªä»£ç å¦‚ä¸‹</p>\n<p><code>R</code></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * é€šç”¨è¿”å›ç»“æœï¼ŒæœåŠ¡ç«¯å“åº”çš„æ•°æ®æœ€ç»ˆéƒ½ä¼šå°è£…æˆæ­¤å¯¹è±¡</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * @param &lt;T></pre></td></tr><tr><td data-num=\"4\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token annotation punctuation\">@Data</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">R</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> code<span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç¼–ç ï¼š1 æˆåŠŸï¼Œ0 å’Œå…¶å®ƒæ•°å­—ä¸ºå¤±è´¥</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> msg<span class=\"token punctuation\">;</span> <span class=\"token comment\">// é”™è¯¯ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">T</span> data<span class=\"token punctuation\">;</span> <span class=\"token comment\">// æ•°æ®</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Map</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// åŠ¨æ€æ•°æ®</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">R</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">success</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> object<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">R</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> r <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">R</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        r<span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        r<span class=\"token punctuation\">.</span>code <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">return</span> r<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">R</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> msg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\">R</span> r <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        r<span class=\"token punctuation\">.</span>msg <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        r<span class=\"token punctuation\">.</span>code <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">return</span> r<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">R</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>Employee</code></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Data</span><span class=\"token comment\">// åŸºäº lombok</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Employee</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Serializable</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> serialVersionUID <span class=\"token operator\">=</span> <span class=\"token number\">1L</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> password<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> phone<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> sex<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> idNumber<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> status<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">LocalDateTime</span> createTime<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">LocalDateTime</span> updateTime<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token annotation punctuation\">@TableField</span><span class=\"token punctuation\">(</span>fill <span class=\"token operator\">=</span> <span class=\"token class-name\">FieldFill</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INSERT</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> createUser<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token annotation punctuation\">@TableField</span><span class=\"token punctuation\">(</span>fill <span class=\"token operator\">=</span> <span class=\"token class-name\">FieldFill</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INSERT_UPDATE</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> updateUser<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": [
                "é¡¹ç›®",
                "åç«¯,springBoot,Mp"
            ]
        },
        {
            "id": "https://ruler64.github.io/hexo/SpringMvc-Rest/",
            "url": "https://ruler64.github.io/hexo/SpringMvc-Rest/",
            "title": "æ·±å…¥SpringMvcå­¦ä¹ ä¹‹è·¯ï¼ˆä¸€ï¼‰Resté£æ ¼å¼€å‘",
            "date_published": "2022-10-10T03:36:44.000Z",
            "content_html": "<p>ç†è§£ Rest æ˜¯ä»€ä¹ˆï¼ŒRest çš„ä¼˜ç¼ºç‚¹ï¼Œä»¥åŠ Rest çš„å››ä¸ªåŠ¨ä½œï¼ˆå¢ã€åˆ ã€æŸ¥ã€æ”¹ï¼‰çš„æ ¼å¼ï¼Œ</p>\n<h1 id=\"restæ˜¯ä»€ä¹ˆ\"><a class=\"anchor\" href=\"#restæ˜¯ä»€ä¹ˆ\">#</a> Rest æ˜¯ä»€ä¹ˆ</h1>\n<p>è¡¨è¿°æ€§çŠ¶æ€è½¬ç§»æ˜¯ä¸€ç»„æ¶æ„çº¦æŸæ¡ä»¶å’ŒåŸåˆ™ã€‚æ»¡è¶³è¿™äº›çº¦æŸæ¡ä»¶å’ŒåŸåˆ™çš„åº”ç”¨ç¨‹åºæˆ–è®¾è®¡å°±æ˜¯ RESTfulã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒREST æ˜¯è®¾è®¡é£æ ¼è€Œä¸æ˜¯æ ‡å‡†ã€‚REST é€šå¸¸åŸºäºä½¿ç”¨<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9IVFRQP2Zyb21Nb2R1bGU9bGVtbWFfaW5saW5r\"> HTTP</span>ï¼ŒURIï¼Œå’Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9YTUw/ZnJvbU1vZHVsZT1sZW1tYV9pbmxpbms=\"> XML</span>ï¼ˆ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTYlQTAlODclRTUlODclODYlRTklODAlOUElRTclOTQlQTglRTYlQTAlODclRTglQUUlQjAlRTglQUYlQUQlRTglQTglODA/ZnJvbU1vZHVsZT1sZW1tYV9pbmxpbms=\">æ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€</span>ä¸‹çš„ä¸€ä¸ªå­é›†ï¼‰ä»¥åŠ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9IVE1MP2Zyb21Nb2R1bGU9bGVtbWFfaW5saW5r\"> HTML</span>ï¼ˆæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„ä¸€ä¸ªåº”ç”¨ï¼‰è¿™äº›ç°æœ‰çš„å¹¿æ³›æµè¡Œçš„åè®®å’Œæ ‡å‡†ã€‚</p>\n<h1 id=\"resté£æ ¼æè¿°å½¢å¼çš„ä¼˜ç‚¹\"><a class=\"anchor\" href=\"#resté£æ ¼æè¿°å½¢å¼çš„ä¼˜ç‚¹\">#</a> Rest é£æ ¼æè¿°å½¢å¼çš„ä¼˜ç‚¹</h1>\n<p><img data-src=\"%E7%AE%80%E4%BB%8B.png\" alt=\"ç®€ä»‹\" /></p>\n<p>æ˜æ˜¾çœ‹åˆ°ï¼Œä¼ ç»Ÿé£æ ¼å¯¹äºè®¿é—®èµ„æºçš„è¡Œä¸ºå¹¶æ— éšè—ï¼ŒåŒæ—¶ï¼Œå…¶æ ¼å¼ç›¸è¾ƒ Rest æ¥è¯´æ›´åŠ çš„å¤æ‚ï¼Œæ‚ä¹±è€Œä¸ç»Ÿä¸€ã€‚</p>\n<h1 id=\"restçš„å››ä¸ªåŠ¨ä½œæ ¼å¼\"><a class=\"anchor\" href=\"#restçš„å››ä¸ªåŠ¨ä½œæ ¼å¼\">#</a> Rest çš„å››ä¸ªåŠ¨ä½œæ ¼å¼</h1>\n<p><img data-src=\"%E6%A0%BC%E5%BC%8F.png\" alt=\"æ ¼å¼\" /></p>\n<h1 id=\"restå…¥é—¨æ¡ˆä¾‹\"><a class=\"anchor\" href=\"#restå…¥é—¨æ¡ˆä¾‹\">#</a> Rest å…¥é—¨æ¡ˆä¾‹</h1>\n<h2 id=\"åˆå§‹æ³¨è§£å¼€å‘\"><a class=\"anchor\" href=\"#åˆå§‹æ³¨è§£å¼€å‘\">#</a> åˆå§‹æ³¨è§£å¼€å‘</h2>\n<p>ä¸¾ä¸ªæ —å­</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Controller</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@ResponseBody</span>é…ç½®åœ¨ç±»ä¸Šå¯ä»¥ç®€åŒ–é…ç½®ï¼Œè¡¨ç¤ºè®¾ç½®å½“å‰æ¯ä¸ªæ–¹æ³•çš„è¿”å›å€¼éƒ½ä½œä¸ºå“åº”ä½“</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">//@ResponseBody</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//@RestController     // ä½¿ç”¨ @RestController æ³¨è§£æ›¿æ¢ @Controller ä¸ @ResponseBody æ³¨è§£ï¼Œç®€åŒ–ä¹¦å†™</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/books\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookController</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span><span class=\"token constant\">POST</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">Book</span> book<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"book save...\"</span> <span class=\"token operator\">+</span> book<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"&#123;'module':'book save'&#125;\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/&#123;id&#125;\"</span> <span class=\"token punctuation\">,</span>method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span><span class=\"token constant\">DELETE</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">//    @DeleteMapping (\"/&#123;id&#125;\")     // ä½¿ç”¨ @DeleteMapping ç®€åŒ– DELETE è¯·æ±‚æ–¹æ³•å¯¹åº”çš„æ˜ å°„é…ç½®</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"book delete...\"</span> <span class=\"token operator\">+</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"&#123;'module':'book delete'&#125;\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span><span class=\"token constant\">PUT</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">//    @PutMapping         // ä½¿ç”¨ @PutMapping ç®€åŒ– Put è¯·æ±‚æ–¹æ³•å¯¹åº”çš„æ˜ å°„é…ç½®</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">Book</span> book<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"book update...\"</span><span class=\"token operator\">+</span>book<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"&#123;'module':'book update'&#125;\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/&#123;id&#125;\"</span> <span class=\"token punctuation\">,</span>method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span><span class=\"token constant\">GET</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\">//    @GetMapping (\"/&#123;id&#125;\")    // ä½¿ç”¨ @GetMapping ç®€åŒ– GET è¯·æ±‚æ–¹æ³•å¯¹åº”çš„æ˜ å°„é…ç½®</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getById</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"book getById...\"</span><span class=\"token operator\">+</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"&#123;'module':'book getById'&#125;\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span><span class=\"token constant\">GET</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\">//    @GetMapping             // ä½¿ç”¨ @GetMapping ç®€åŒ– GET è¯·æ±‚æ–¹æ³•å¯¹åº”çš„æ˜ å°„é…ç½®</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"book getAll...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"&#123;'module':'book getAll'&#125;\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"ä¼˜åŒ–æ³¨è§£å¼€å‘\"><a class=\"anchor\" href=\"#ä¼˜åŒ–æ³¨è§£å¼€å‘\">#</a> ä¼˜åŒ–æ³¨è§£å¼€å‘</h2>\n<p><code> @RestController</code>  æ³¨è§£åŒ…å«äº† <code>@Controller</code>  ä¸ <code>@ResponseBody</code>  æ³¨è§£ï¼Œå®ç°ç®€åŒ–ä¹¦å†™</p>\n<h3 id=\"requestmappingä¼˜åŒ–\"><a class=\"anchor\" href=\"#requestmappingä¼˜åŒ–\">#</a> @RequestMapping ä¼˜åŒ–</h3>\n<ol>\n<li>\n<p>å¢ <code>@RequestMapping( method = RequestMethod.POST)</code> =&gt; <code>@PostMapping</code></p>\n</li>\n<li>\n<p>åˆ  <code>@RequestMapping(value = &quot;/&#123;id&#125;&quot; ,method = RequestMethod.DELETE)</code> =&gt; <code>@DeleteMapping(&quot;/&#123;id&#125;&quot;)</code></p>\n</li>\n<li>\n<p>æ”¹ <code>@RequestMapping(method = RequestMethod.PUT)</code> =&gt; <code>@PutMapping</code></p>\n</li>\n<li>\n<p>æŸ¥ <code>@RequestMapping(value = &quot;/&#123;id&#125;&quot; ,method = RequestMethod.GET)</code> =&gt; <code>@GetMapping(&quot;/&#123;id&#125;&quot;)</code></p>\n</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// æ ‡å‡† REST é£æ ¼æ§åˆ¶å™¨å¼€å‘</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@RestController</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/books\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookController2</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token annotation punctuation\">@PostMapping</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">Book</span> book<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"book save...\"</span> <span class=\"token operator\">+</span> book<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"&#123;'module':'book save'&#125;\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@DeleteMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/&#123;id&#125;\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"book delete...\"</span> <span class=\"token operator\">+</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"&#123;'module':'book delete'&#125;\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token annotation punctuation\">@PutMapping</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">Book</span> book<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"book update...\"</span><span class=\"token operator\">+</span>book<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"&#123;'module':'book update'&#125;\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/&#123;id&#125;\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getById</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"book getById...\"</span><span class=\"token operator\">+</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"&#123;'module':'book getById'&#125;\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token annotation punctuation\">@GetMapping</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"book getAll...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"&#123;'module':'book getAll'&#125;\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"æ³¨è§£ç†è§£\"><a class=\"anchor\" href=\"#æ³¨è§£ç†è§£\">#</a> æ³¨è§£ç†è§£</h2>\n<h3 id=\"pathvariable\"><a class=\"anchor\" href=\"#pathvariable\">#</a> PathVariable</h3>\n<p><img data-src=\"PathVariable.png\" alt=\"PathVariable\" /></p>\n<h3 id=\"æ³¨è§£é€‰æ‹©\"><a class=\"anchor\" href=\"#æ³¨è§£é€‰æ‹©\">#</a> æ³¨è§£é€‰æ‹©</h3>\n<p><img data-src=\"%E5%8F%82%E6%95%B0.png\" alt=\"å‚æ•°\" title=\"æ³¨è§£é€‰æ‹©\" /></p>\n",
            "tags": [
                "ç¬”è®°",
                "åç«¯,SpringMvc"
            ]
        },
        {
            "id": "https://ruler64.github.io/hexo/thread-lock/",
            "url": "https://ruler64.github.io/hexo/thread-lock/",
            "title": "çº¿ç¨‹å®‰å…¨é—®é¢˜",
            "date_published": "2022-10-09T03:36:44.000Z",
            "content_html": "<h1 id=\"å…³äºçº¿ç¨‹å®‰å…¨é—®é¢˜\"><a class=\"anchor\" href=\"#å…³äºçº¿ç¨‹å®‰å…¨é—®é¢˜\">#</a> å…³äºçº¿ç¨‹å®‰å…¨é—®é¢˜</h1>\n<p>ctrl+alt+t ç¬¬ä¹ä¸ª synchronized (this): ç»™æ ¸å¿ƒæ“ä½œ (åˆ¤æ–­é“¶è¡Œé’±å¤Ÿä¸å¤Ÿ) ä¸Šé”ã€‚åŒæ—¶ä¹Ÿå¯ä»¥ç”¨ Lock ç±»æ¥åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„é”ä½†æ˜¯å› ä¸º Lock ä¸ºæ¥å£ï¼Œä¸èƒ½æœ‰å®ä½“ç±»æ‰€ä»¥ç”¨ privateÂ finalÂ LockÂ lockÂ =Â newÂ ReentrantLock (); ç„¶ååœ¨éœ€è¦ä¸Šé”çš„åœ°æ–¹å‰åŠ å…¥ lock.lock (); ä½†æ˜¯åœ¨æ­¤æ–¹æ³•ç»“æŸæ—¶è¦åŠ å…¥ tryÂ æ¥æŠ›å‡ºæ–¹æ³•å¯èƒ½ä¼šå‡ºç°çš„å¼‚å¸¸æœ€ååŠ å…¥ finally ç„¶ååœ¨ finally {lock.unlock ();}// è§£é”</p>\n",
            "tags": [
                "ç¬”è®°",
                "åç«¯,thread"
            ]
        },
        {
            "id": "https://ruler64.github.io/hexo/hexo-url-optimization/",
            "url": "https://ruler64.github.io/hexo/hexo-url-optimization/",
            "title": "Hexoåšå®¢urlä¼˜åŒ–",
            "date_published": "2022-10-02T13:35:48.000Z",
            "content_html": "<h1 id=\"å…³äºhexoåšå®¢urlçš„ä¼˜åŒ–\"><a class=\"anchor\" href=\"#å…³äºhexoåšå®¢urlçš„ä¼˜åŒ–\">#</a> å…³äº hexo åšå®¢ url çš„ä¼˜åŒ–</h1>\n<p>å…³äº hexo åšå®¢ url çš„ä¼˜åŒ–ï¼Œå»ºè®®çœ‹: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3l1c2l4aWFuL2Nvc19ibG9ncy9ibG9iL21haW4vc291cmNlL19wb3N0cy90b29scy9IZXhvJUU1JThEJTlBJUU1JUFFJUEydXJsJUU0JUJDJTk4JUU1JThDJTk2Lm1k\">Hexo åšå®¢ url ä¼˜åŒ–</span></p>\n",
            "tags": [
                "å·¥å…·",
                "å‰ç«¯,hexo"
            ]
        }
    ]
}